<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta name="referrer" content="no-referrer" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-material.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"huangyuye.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":3,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="想要成为酷酷的软件开发者">
<meta property="og:type" content="website">
<meta property="og:title" content="歪歪的小站">
<meta property="og:url" content="https://huangyuye.github.io/page/4/index.html">
<meta property="og:site_name" content="歪歪的小站">
<meta property="og:description" content="想要成为酷酷的软件开发者">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yy.huang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://huangyuye.github.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>歪歪的小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="歪歪的小站" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">歪歪的小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Coder.YY</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2021/04/06/yuque/Windows%20%E5%BC%80%E7%AE%B1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/06/yuque/Windows%20%E5%BC%80%E7%AE%B1/" class="post-title-link" itemprop="url">Windows 开箱</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 15:19:54" itemprop="dateCreated datePublished" datetime="2021-04-06T15:19:54+00:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:42" itemprop="dateModified" datetime="2021-05-25T07:35:42+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/yuque/" itemprop="url" rel="index"><span itemprop="name">yuque</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2021/04/06/yuque/Windows%20%E5%BC%80%E7%AE%B1/" class="post-meta-item leancloud_visitors" data-flag-title="Windows 开箱" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/04/06/yuque/Windows%20%E5%BC%80%E7%AE%B1/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/04/06/yuque/Windows%20%E5%BC%80%E7%AE%B1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.9k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><p>下载最新的 <a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/edge">Microsoft Edge</a>，使用默认的必应搜索引擎</p>
<h2 id="代理服务器"><a href="#代理服务器" class="headerlink" title="代理服务器"></a>代理服务器</h2><p>如果有 vpn 账号，下载 Vpn 客户端，开启 PAC，并自动配置系统代理<br>浏览器下载 SwitchyOmega 插件实现快速切换代理，可以选择直接连接或者使用系统代理（即 vpn 代理）</p>
<p><code>ss 与 gfwlist</code> <a target="_blank" rel="noopener" href="https://github.com/gfwlist/gfwlist">https://github.com/gfwlist/gfwlist</a></p>
<h2 id="替换-CMD"><a href="#替换-CMD" class="headerlink" title="替换 CMD"></a>替换 CMD</h2><h3 id="PowerShell"><a href="#PowerShell" class="headerlink" title="PowerShell"></a>PowerShell</h3><p>Windows powershell 的升级版<br>下载地址：<a target="_blank" rel="noopener" href="https://github.com/PowerShell/PowerShell">https://github.com/PowerShell/PowerShell</a></p>
<h3 id="Windows-Terminal"><a href="#Windows-Terminal" class="headerlink" title="Windows Terminal"></a>Windows Terminal</h3><p>Microsoft Store 下载 Windows Terminal，可以集成各个命令行工具，如上述提到的 powershell，以及 cmder 等<br>除此之外，还可以使用 wsl windows 子系统的方式，集成 linux 子系统命令行工具</p>
<p>下载好终端之后，需要对终端进行美化，一般过程如下：</p>
<ol>
<li>下载字体，下载字体后一般到对应的<code>ttf</code>目录下全选字体并安装到 OS 系统中</li>
<li>下载 PowerShell</li>
<li>安装 power shell 插件模块（Install-Module）<ol>
<li>Install-Module oh-my-posh -Scope CurrentUser：<em>让你的命令行更酷炫、优雅</em></li>
<li>Install-Module posh-git -Scope CurrentUser：<em>让你的 git 更好用</em></li>
<li>Install-Module -Name PSReadLine -AllowPrerelease -Force：<em>让命令行很好用，类似 zsh</em></li>
<li>注意：Install-Module 下载插件一般可以使用-Verbose 参数用于查看具体的插件下载地址，浏览器输入下载地址直接下载用于解决命令行下载缓慢的问题。下载完成后将插件解压后放到 power shell 安装目录的 <code>module</code>文件夹下，注意格式为：<code>$&#123;powerShell.path&#125;/module/$&#123;插件名&#125;/$&#123;插件版本&#125;/</code></li>
</ol>
</li>
<li>打开 Windows Terminal 配置文件进行字体、主题配置</li>
<li>添加右键菜单：编写<code>terminal.reg</code>文件并以管理员命令执行（<strong>注意根据情况修改路径</strong>）</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version <span class="number">5.00</span></span><br><span class="line"></span><br><span class="line">[<span class="type">HKEY_CLASSES_ROOT</span>\<span class="type">Directory</span>\<span class="type">Background</span>\<span class="type">shell</span>\<span class="type">wt</span>]</span><br><span class="line"><span class="selector-tag">@</span>=<span class="string">&quot;Windows terminal here&quot;</span></span><br><span class="line"><span class="string">&quot;Icon&quot;</span>=<span class="string">&quot;C:\\Users\\16957\\AppData\\Local\\terminal\\wt_32.ico&quot;</span></span><br><span class="line"></span><br><span class="line">[<span class="type">HKEY_CLASSES_ROOT</span>\<span class="type">Directory</span>\<span class="type">Background</span>\<span class="type">shell</span>\<span class="type">wt</span>\<span class="type">command</span>]</span><br><span class="line"><span class="selector-tag">@</span>=<span class="string">&quot;C:\\Users\\16957\\AppData\\Local\\Microsoft\\WindowsApps\\wt.exe&quot;</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>添加 Powershell 启动参数：<code>notepad.exe $Profile</code><ol>
<li>import 插件模块</li>
<li>设置主题</li>
<li>设置热键、函数、别名等</li>
</ol>
</li>
</ol>
<p><strong>其他</strong></p>
<ul>
<li><strong>Windows Terminal 分屏操作：</strong><code>ctrl + shrift + d</code></li>
<li><code>chocolate</code> ：windows 下的软件安装管理器<ul>
<li><code>@&quot;%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe&quot; -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command &quot; [System.Net.ServicePointManager]::SecurityProtocol = 3072; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))&quot; &amp;&amp; SET &quot;PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin&quot;</code></li>
</ul>
</li>
</ul>
<h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/137595941">Windows Terminal 完美配置 PowerShell 7.1</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/272082726">Windows Terminal 完整指南</a>​<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhouchen1998/article/details/107484782">Windows Terminal 美化教程</a></p>
<h3 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h3><p>使用 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/Eric-jx/p/10491922.html">vim</a> 快速的在命令行中操作文件</p>
<h4 id="vim-相关配置修改"><a href="#vim-相关配置修改" class="headerlink" title="vim 相关配置修改"></a>vim 相关配置修改</h4><ol>
<li> cmd 中执行 vim 命令，执行 vim 指令<code>:version</code>查看配置文件路径，可以看到配置文件为<code>C:\Program Files (x86)\Vim\_vimrc</code></li>
<li> 修改配置文件，关闭 un~临时文件的输出</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> noundofile</span><br><span class="line"><span class="built_in">set</span> nobackup</span><br><span class="line"><span class="built_in">set</span> noswapfile</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>修改 vim 操作的文件编码，可参考<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/3024.html">http://c.biancheng.net/view/3024.html</a></li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C:\Program Files (x86)\Vim\_vimrc</span></span><br><span class="line"><span class="comment"># 编码设置 start http://c.biancheng.net/view/3024.html</span></span><br><span class="line"><span class="built_in">set</span> fileencodings=utf<span class="literal">-8</span>,ucs<span class="literal">-bom</span>,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="built_in">set</span> termencoding=utf<span class="literal">-8</span></span><br><span class="line"><span class="built_in">set</span> encoding=utf<span class="literal">-8</span></span><br></pre></td></tr></table></figure>

<h2 id="NVM-下载"><a href="#NVM-下载" class="headerlink" title="NVM 下载"></a>NVM 下载</h2><blockquote>
<p>该标题下的内容建议仅开发同学关注</p>
</blockquote>
<p>不管是使用 windows 还是系统系统，很多时候我们都需要在本地电脑运行一些前端项目，这时候会用到 nodejs 环境以及 npm 包管理工具，所以下载 <a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">nvm</a> 可以帮助你方便的管理与切换 node 环境版本</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm install &lt;nodejs.version&gt;</span><br><span class="line">nvm use &lt;nodejs.version&gt;</span><br></pre></td></tr></table></figure>

<h3 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a>cnpm</h3><p>npm 是 node 官方的包管理器。cnpm 是个中国版的 npm，是淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm。npm 和 cnpm 只是下载器的不同</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="literal">-g</span> cnpm -<span class="literal">-registry</span>=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h3 id="nrm"><a href="#nrm" class="headerlink" title="nrm"></a>nrm</h3><p>nrm 这个包的功能可以让我们随意的切换我们下载包的地址。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm i nrm <span class="literal">-g</span></span><br><span class="line">nrm <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>

<h3 id="Ruby-gem-下载"><a href="#Ruby-gem-下载" class="headerlink" title="Ruby gem 下载"></a>Ruby gem 下载</h3><p>使用 travis ci 时可能需要用到 <a target="_blank" rel="noopener" href="https://rubyinstaller.org/">gem</a>下载 travis 工具</p>
<h4 id="命令权限"><a href="#命令权限" class="headerlink" title="命令权限"></a>命令权限</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set-executionpolicy</span> remotesigned</span><br></pre></td></tr></table></figure>

<h2 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h2><p><a target="_blank" rel="noopener" href="https://typora.io/windows/dev_release.html">Typora </a>是一款强大简洁的 markdown 文本编辑器，可以使用它高效的编码 md 文档</p>
<h2 id="listary"><a href="#listary" class="headerlink" title="listary"></a>listary</h2><p><a target="_blank" rel="noopener" href="https://www.listary.com/download">Listary</a> 是一个革命性的 Windows 搜索工具，可以帮你快速查找文件和启动应用程序</p>
<h2 id="snipaste"><a href="#snipaste" class="headerlink" title="snipaste"></a>snipaste</h2><p>很好用的截图工具，支持多张截图拼图，快捷键—F1：截图；F3：将截图放在桌面进行拼图，下载地址点<a target="_blank" rel="noopener" href="https://zh.snipaste.com/">这里</a></p>
<h2 id="GitHub-Gist-管理工具"><a href="#GitHub-Gist-管理工具" class="headerlink" title="GitHub Gist 管理工具"></a>GitHub Gist 管理工具</h2><p>Gist 是基于 Github 的 code snippet 仓库，Github Gist 的可操作性比较少，一般会下载 Gist 管理工具提供更多功能支持。<br>一般的 GitHub Gist 管理工具有：gisto、gistbox、lepton</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2021/04/05/yuque/%E8%AF%AD%E9%9B%80-Hexo-GitHub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/05/yuque/%E8%AF%AD%E9%9B%80-Hexo-GitHub/" class="post-title-link" itemprop="url">语雀-Hexo-GitHub</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-05 11:17:36" itemprop="dateCreated datePublished" datetime="2021-04-05T11:17:36+00:00">2021-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:43" itemprop="dateModified" datetime="2021-05-25T07:35:43+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/yuque/" itemprop="url" rel="index"><span itemprop="name">yuque</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2021/04/05/yuque/%E8%AF%AD%E9%9B%80-Hexo-GitHub/" class="post-meta-item leancloud_visitors" data-flag-title="语雀-Hexo-GitHub" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/04/05/yuque/%E8%AF%AD%E9%9B%80-Hexo-GitHub/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/04/05/yuque/%E8%AF%AD%E9%9B%80-Hexo-GitHub/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.5k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="角色介绍"><a href="#角色介绍" class="headerlink" title="角色介绍"></a>角色介绍</h2><h3 id="语雀"><a href="#语雀" class="headerlink" title="语雀"></a>语雀</h3><p>云端写作工具</p>
<h4 id="Web-Hook"><a href="#Web-Hook" class="headerlink" title="Web Hook"></a>Web Hook</h4><p>可以创建写作时的钩子，即可以监听文章内容的变更事件（更新、新建、删除等）并请求某接口（get 请求）</p>
<h3 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h3><p><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>是一个博客框架，支持专注于.md 格式的内容编辑后快速生成静态博客页面<br>​</p>
<h4 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> npm install <span class="literal">-g</span> hexo<span class="literal">-cli</span></span><br><span class="line"><span class="comment"># 对于熟悉 npm 的进阶用户，可以仅局部安装hexo包。</span></span><br><span class="line"><span class="variable">$</span> npm install hexo</span><br></pre></td></tr></table></figure>

<p>安装以后，可以使用以下两种方式执行 Hexo：</p>
<ol>
<li>npx hexo <command></li>
<li>将 Hexo 所在的目录下的 node_modules 添加到环境变量之中即可直接使用 hexo <command>：<table>
<thead>
<tr>
<th>echo ‘PATH=”$PATH:./node_modules/.bin”‘ &gt;&gt; ~/.profile</th>
</tr>
</thead>
</table>
</li>
</ol>
<h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><p>提供托管生成的静态页面的功能</p>
<h4 id="GitHub-Actions"><a href="#GitHub-Actions" class="headerlink" title="GitHub Actions"></a>GitHub Actions</h4><p>可以作为 travis ci 的替代方案（travis ci 的构建任务的触发也是通过 GitHub 的组件<code>Github WebHook</code>来支持的）<br><img src="https://cdn.nlark.com/yuque/0/2021/png/10363384/1621391502370-3546e6ca-93b3-43aa-8ecb-75be46f1d651.png#clientId=u6236cb25-c3e3-4&from=paste&height=977&id=u1de82d50&margin=%5Bobject%20Object%5D&name=image.png&originHeight=977&originWidth=1600&originalType=binary&size=106078&status=done&style=none&taskId=u5e85f72d-890c-4927-ad3d-0fc7a822406&width=1600" alt="image.png"></p>
<h3 id="Travis"><a href="#Travis" class="headerlink" title="Travis"></a>Travis</h3><p><a target="_blank" rel="noopener" href="https://travis-ci.com/">Travis</a>是一个提供 github 项目的 CI 持续集成的免费平台<br>Travis 可以通过 api 的方式触发构建过程</p>
<h3 id="腾讯云函数-serverless"><a href="#腾讯云函数-serverless" class="headerlink" title="腾讯云函数 serverless"></a>腾讯云函数 serverless</h3><p>使用平台支持的语言（如 php、python 等）编写核心代码并设置代码运行的条件（可定时触发或者 API 触发等），代码即可在腾讯云基础设施上弹性、安全地运行。</p>
<h2 id="角色关系"><a href="#角色关系" class="headerlink" title="角色关系"></a>角色关系</h2><ul>
<li>可以在 GitHub 中创建 github pages 作为 <code>博客</code>  项目 ，用于保存自己的博客的前端资源文件，且可以通过 github 提供的个人博客域名展示自己的博客内容</li>
<li>Hexo 为博客框架，可以将编写的<code>文章</code>(.md 文件)按照 <code>hexo模板</code>  格式生成前端静态资源文件。hexo 框架支持配置在生成前端资源文件之后将你的文件推送部署到 github 进行托管</li>
<li>Travis 为持续集成工具，可以为你免去使用 hexo 框架带来的一些冗余且重复性的操作，但在此之前你需要像下面这样做：<ul>
<li>你需要维护你的 <code>文章</code> （.md 文件）到 github 的某个项目中，当然你可以选择复用博客项目，使用该项目的另一个分支即可</li>
<li>登入 travis，关联你的 gitHub 项目（托管 <code>文章</code>  的项目与分支）</li>
<li>在托管 <code>文章</code> 的项目根目录下配置好 travis 的配置文件，配置内容包括将 hexo 构建生成博客内容、hexo 部署博客内容到 <code>博客</code>  项目、访问 <code>博客</code>  项目的授权信息等（涉及到博客项目的 push 操作）</li>
<li>登入 travis，配置好相关的 gitHub 访问授权</li>
<li>以上配置结束后，后续你只需要专心关注你的文章，必及时将你的文章内容推送到 github，travis 就会自动化地帮你构建出博客内容，并发布最新内容到你的个人博客了</li>
</ul>
</li>
<li>语雀为写作工具，写作内容自带云同步效果，且拥有较好的写作用户体验，所以可以考虑放弃在本地机器中用 typora 等工具写文章，直接到语雀上进行云写作。这样就衍生出一个新问题，之前本地写的文章都可以推送到 github，且由 travis 和 hexo 帮你生成并搭建出你的个人博客内容，那语雀上写的文章能不能也达到这效果？答案是可以的</li>
<li>语雀 web hook 可以监听你的写作行为，可以在更新文章时触发调用某个外部的 API 接口，而 travis 恰好提供了这种机制，提供了 travis api 接口，允许外部触发 github 项目的 build 流程，该 api 方法为 post 请求</li>
<li>但是语雀 web hook 限制了调用的 API 必须是 get 请求的，不能是 post 请求的，所以就需要使用腾讯云函数</li>
</ul>
<h2 id="搭建流程"><a href="#搭建流程" class="headerlink" title="搭建流程"></a>搭建流程</h2><h2 id="授权问题"><a href="#授权问题" class="headerlink" title="授权问题"></a>授权问题</h2><ol>
<li>travis ci 可以使用两种方式访问 Github：<ul>
<li>一种是使用 github 的 personal access token（使用环境变量的方式配置到 travis）</li>
<li>一种是使用 ssh key 的方式，将 ssh 公钥配置到 github 的 travis 项目中，前提会将公钥文件通过 travis 的加密方式加密，生成 xxx.enc 文件，并将密钥配置到 travis 环境变量中，明文显示的公钥文件可删除</li>
</ul>
</li>
<li>同上，travis ci 同步语雀文章需要使用到语雀的 <a target="_blank" rel="noopener" href="https://www.yuque.com/settings/tokens">personal access token</a></li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul>
<li>调用 travis api 时，语雀 webhook 以及 serverless 云函数中的<code>仓库slug</code>参数值（user_name/repo_name）必须先进行 urlencode，否则接口调用会报 404 错误。（<strong>一定要注意，这个坑折腾了很长时间</strong>）</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;@type&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;error_type&quot;</span>: <span class="string">&quot;not_found&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;error_message&quot;</span>: <span class="string">&quot;resource not found (or insufficient access)&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>建议先根据仓库 slug 查询仓库 id 避免后续修改仓库名称导致 404 等错误<ul>
<li>api.travis-ci.org/repo/3121806s7/requests</li>
</ul>
</li>
<li>语雀 webhook 不能直接构建脚本直接发起 POST 请求到 Travis，所以可以通过代理服务触发 Travis CI API<ul>
<li>腾讯云函数作为代理服务，Web Hook 的请求发送至该服务后，该服务去触发 Travis 的 CI 构建。</li>
</ul>
</li>
<li>针对语雀图片无法正常显示的解决办法（语雀防盗链）<ul>
<li>在主题的 layout 文件夹中的 post.ejs 文件请求头中加上一句</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-referrer&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="为你的博客搭建图床"><a href="#为你的博客搭建图床" class="headerlink" title="为你的博客搭建图床"></a>为你的博客搭建图床</h2><p><a target="_blank" rel="noopener" href="https://www.yuque.com/huangyuye/blog/qabgtz">PicGo + GitHub 创建自己的免费图床</a></p>
<h2 id="美化你的博客主题"><a href="#美化你的博客主题" class="headerlink" title="美化你的博客主题"></a>美化你的博客主题</h2><p>参考我另一篇文章 <a target="_blank" rel="noopener" href="https://www.yuque.com/huangyuye/blog/eqqt0i">Hexo 主题美化</a></p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li>《<a target="_blank" rel="noopener" href="https://www.yuque.com/hxfqg9/web/gtb5ck">语雀自动同步到 hexo 博客</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://www.yuque.com/joashzhao/blog/sync-yuque-to-hexo#egrli">语雀自动同步 HEXO 机器人——搭建细节</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017797561">Hexo 博客终极玩法：云端写作，自动部署</a>》</li>
<li>《<a target="_blank" rel="noopener" href="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/#%E4%BB%8B%E7%BB%8D">利用 Github Actions 自动部署 Hexo 博客</a>》</li>
</ul>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ol>
<li>了解 GitHub Pages，需要搭建 github.io 的 repo_name 可否自定义？可否自定义 repo_branch？</li>
<li>语雀 - Hexo - Github 同步之后，能否在博客中加上本地机器写的文章？</li>
<li>博客主题：Hexo 美化 与 GitHub Pages 美化</li>
<li>使用 GitHub Actions 替代 Travis</li>
<li>学会云管理自己的配置—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/thinkam/p/10922920.html">Gist</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/11/24/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20201124-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/24/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20201124-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">单元测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-24 00:00:00" itemprop="dateCreated datePublished" datetime="2020-11-24T00:00:00+00:00">2020-11-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">软件开发流程</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/11/24/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20201124-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="post-meta-item leancloud_visitors" data-flag-title="单元测试" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/24/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20201124-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/24/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20201124-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>735</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a><strong>单元测试</strong></h3><p>单元测试是指对软件中的<strong>最小可测单元</strong>进行检查和验证；</p>
<p>根据测试金字塔原理，越往上层的测试，所需测试投入比例越大，效果也越差。单测成本小，且更容易发现问题。（效果：单元测试 &gt; 集成测试 &gt; UI测试）</p>
<h3 id="分层测试"><a href="#分层测试" class="headerlink" title="分层测试"></a><strong>分层测试</strong></h3><p>Service =&gt; Biz层 =&gt; （外部服务访问层、DAO层、Redis访问层）</p>
<p>每一层均使用mock 框架屏蔽下层的具体实现。</p>
<h3 id="单元测试过程"><a href="#单元测试过程" class="headerlink" title="单元测试过程"></a><strong>单元测试过程</strong></h3><p>数据准备 =&gt; 构造参数（+打桩）=&gt; 执行测试 =&gt; 结果验证 =&gt; 清理（必要）</p>
<ol>
<li>数据准备：测试用例需要依赖一些数据，数据来源一般是数据库，而又不能依赖DAO层的代码，需要使用原生jdbc去插入数据，<strong>测试代码编写效率低</strong></li>
<li>构造参数：入参赋值（<strong>代码行数多</strong>）</li>
<li>执行测试：直接调用被测方法</li>
<li>结果验证：验证方法的返回值、数据库数据是否正确、某外部方法是否被调用过n次等</li>
<li>必要的清理：对打桩进行清理、对数据库脏数据进行清理</li>
</ol>
<h3 id="痛点"><a href="#痛点" class="headerlink" title="痛点"></a><strong>痛点</strong></h3><ol>
<li>重构代码需要改写大量单元测试用例<ol>
<li>大量的Service 层单元测试,biz层单元测试都要重写；有时候Service调用biz层接口时，参数传错了，而由于开发人员编写单元测试时不规范，参数匹配使用了 anyxxx()，导致参数传错的bug未被发现。</li>
</ol>
</li>
<li>测试库数据随意修改导致的单元测试不稳定<ol>
<li>DAO层单元测试直连测试库，由于测试库的数据可以被任意修改，从而导致测试依赖的数据被更改，单元测试不通过，另外开发在编写单元测试时，没有清理意识，导致测试库大量垃圾数据。</li>
</ol>
</li>
<li>单元测试结果校验缺失<ol>
<li>例如一个SaveItem()接口，执行完成后除了要验证执行成功以外，还应该验证落库数据的正确性，而编写这部分测试代码需要大量的使用原生jdbc 接口查询sql，并逐字段验证正确性，代码编写效率低下。</li>
</ol>
</li>
</ol>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a target="_blank" rel="noopener" href="https://tech.youzan.com/youzan-test-practice/">《有赞单元测试实践》</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/11/07/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20201107-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/07/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20201107-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">数据结构和算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-11-07T00:00:00+00:00">2020-11-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">基础知识</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">算法与数据结构</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/11/07/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20201107-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" class="post-meta-item leancloud_visitors" data-flag-title="数据结构和算法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/07/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20201107-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/07/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20201107-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="算法与数据结构"><a href="#算法与数据结构" class="headerlink" title="算法与数据结构"></a>算法与数据结构</h1><h2 id="算法与数据结构常见问题场景"><a href="#算法与数据结构常见问题场景" class="headerlink" title="算法与数据结构常见问题场景"></a>算法与数据结构常见问题场景</h2><ol>
<li>字符串匹配<ol>
<li>暴力匹配（回溯匹配，回溯次数多，速度慢）</li>
<li>KMP算法（ -&gt; 建立部分匹配表）</li>
</ol>
</li>
<li>汉诺塔问题（大方块不能在小方块下面）</li>
<li>八皇后问题：92种算法</li>
<li>马踏棋盘算法（骑士周游算法）</li>
</ol>
<h2 id="数据结构和算法的关系"><a href="#数据结构和算法的关系" class="headerlink" title="数据结构和算法的关系"></a>数据结构和算法的关系</h2><p>数据结构是<strong>研究组织数据方式</strong>的学科</p>
<p>数据结构是算法的基础</p>
<p><strong>数据结构包括：线性结构/非线性结构</strong></p>
<h3 id="线性结构"><a href="#线性结构" class="headerlink" title="线性结构"></a>线性结构</h3><ol>
<li>数据元素之间存在一对一线性关系</li>
<li>两种不同的存储结构：<strong>顺序存储结构&amp;链式存储和结构</strong> (数组&amp;链表)——元素节点中存放数据元素及相邻元素的地址信息不连续</li>
<li>常见的线性结构有：数组、队列、链表和栈</li>
</ol>
<h3 id="非线性结构"><a href="#非线性结构" class="headerlink" title="非线性结构"></a>非线性结构</h3><ol>
<li>数组元素之间不是一对一的线性关系</li>
<li>场景的非线性结构：多维数组、广义表、树结构、图结构</li>
</ol>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="稀疏数组（sparse-array）"><a href="#稀疏数组（sparse-array）" class="headerlink" title="稀疏数组（sparse array）"></a>稀疏数组（sparse array）</h3><p><strong>场景：</strong></p>
<p>编写五子棋程序，且有存盘和续上盘的功能；</p>
<p><strong>问题：</strong></p>
<p>使用二维数组记录棋盘，存在很多值为0的元素</p>
<p><strong>稀疏数组介绍：</strong></p>
<p>当一个数组中大部分元素为0，或者为同一个值的数组时，可以使用稀疏数组来表示</p>
<p><strong>使用稀疏数组的处理方法：</strong></p>
<p>1、第一行记录一共有几行几列，有多少个不同得值</p>
<p>2、把具有不同值得行列及值记录在一个小规模得数组中，从而缩小程序的规模</p>
<h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p>队列是一个有序列表，可以用数组或链表来实现</p>
<p>遵循先进先出的原则</p>
<p><strong>使用数组模拟队列：</strong></p>
<p>保存两个变量-front &amp; rear （头尾的下标）；maxSize为数组容量，若rear=maxSize-1则队列满（front和rear从-1/0开始）（front：指向队列头的前一个位置；rear指向队列尾最后一个位置）; front=rear则队列为空</p>
<p><strong>问题：</strong></p>
<p>单向队列：数组使用一次就不能用，没有达到复用效果</p>
<p><strong>解决方案：</strong>改为环形队列</p>
<p><strong>环形队列调整思路：</strong></p>
<ol>
<li><p>front指向队列的第一个元素；front初始值为0</p>
</li>
<li><p>rear指向队列的最后一个元素的后一个位置；rear初始值为0</p>
</li>
<li><p>判断队列满的条件为：(rear+1)%maxSize=front</p>
</li>
<li><p>队列中有效的数据个数：(rear + maxSize - front) % maxSize  （为什么要+maxSize？因为是环形队列，rear的下标有可能小于front的下标，这里是为了避免为负数）</p>
</li>
</ol>
<h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><p>链表是有序的列表，内存不一定连续；每个节点包含data域，next域</p>
<p>可区分为有头节点或无头节点的链表</p>
<p><strong>链表排序</strong></p>
<p>新增节点时进行排序：遍历链表，找到新添加节点的位置（<strong>遍历，比较节点的值，直到遍历节点的值大于待插入节点的值</strong>），将新节点的next指向插入位置的节点的next，将插入位置的节点的next指向新节点。</p>
<p><strong>遍历链表节点逻辑</strong></p>
<p>使用辅助变量，从head节点开始，通过next指向遍历</p>
<p><strong>排序和限制重复的思考</strong></p>
<ol>
<li>若要支持排序，则定义比较大小的规则，如实现comparable接口重写compare方法</li>
<li>若要支持更新或者唯一限制，则要定义节点判断唯一的规则，如重写equals方法(以及hashcode())</li>
</ol>
<p><strong>链表反转</strong></p>
<ol>
<li>创建一个新的头节点 newHead</li>
<li>遍历原链表,<ol>
<li>temp辅助变量记录newHead.next</li>
<li>每次遍历都将 newHead指向遍历的节点node，遍历的节点node.next指向原先newHead的next，即temp（可使用辅助变量）</li>
</ol>
</li>
</ol>
<p>其他方案：可以使用临时数组  </p>
<p><strong>链表逆序打印</strong></p>
<p>实现思路1：利用栈<strong>先进后出</strong>特性</p>
<p><strong>栈</strong></p>
<p>栈的底层实现是数组，父类是Vector矢量类</p>
<p><strong>应用场景</strong></p>
<p><strong>单向环形链表</strong>——约瑟夫环问题（丢手帕）</p>
<p>单向环形链表：最后一个节点的next指向头节点</p>
<p>丢手帕报数过程：head和tail指针同时移动，报数出队时，head节点修改，且tail节点的next指针指向新的head节点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ... 其他参数校验</span></span><br><span class="line"><span class="comment">// 遍历</span></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tail == head) &#123;</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m-<span class="number">1</span>; i++) &#123;</span><br><span class="line">		tail = tail.next;</span><br><span class="line">		first = first.next;</span><br><span class="line">	&#125;</span><br><span class="line">	sout(first);</span><br><span class="line">	first=first.next;</span><br><span class="line">	tail.next=first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><p>栈是一个先进后出的有序列表(FILO first in last out)</p>
<p>栈是限制线性表中元素的插入和删除只能在线性表的同一端进行操作的一种特殊线性表。允许插入和删除的一端为变化端，即栈顶。另一端为栈底。</p>
<p><strong>应用场景</strong></p>
<ul>
<li>子程序的调用</li>
<li>处理递归调用</li>
<li>表达式的转换[中缀表达式转后缀表达式]与求值</li>
<li>二叉树的遍历</li>
<li>图形的深度优先搜索法</li>
</ul>
<p><strong>需求场景</strong></p>
<p>前端输入一个表达式，编写一个函数进行计算：String str = 7*2</p>
<p>栈的应用场景、实现原理、<strong>实现计算器</strong></p>
<p><strong>实现计算器</strong></p>
<p>两个栈，一个存放数，一个存放操作符，遍历字符时若当前字符是操作符，则判断优先级是否小于或等于操作符栈的上一个操作符，是的话则从数栈pop出两个数，从操作符栈pop出一个符号进行计算，然后将当前的符号入符号栈；否则直接入符号栈（中缀表达式）</p>
<h3 id="前缀-amp-中缀-amp-后缀表达式"><a href="#前缀-amp-中缀-amp-后缀表达式" class="headerlink" title="前缀&amp;中缀&amp;后缀表达式"></a>前缀&amp;中缀&amp;后缀表达式</h3><p>前缀表达式：运算符位于操作符之前</p>
<h3 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h3><p>双向链表同时记录了头尾节点，且每个节点增加prev上一节点引用指针</p>
<h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="算法-递归"><a href="#算法-递归" class="headerlink" title="算法-递归"></a>算法-递归</h3><p>应用场景：阶乘、迷宫问题（回溯）、八皇后问题</p>
<h3 id="算法-排序"><a href="#算法-排序" class="headerlink" title="算法-排序"></a>算法-排序</h3><p>将一组数组，依据指定顺序进行排列的过程</p>
<p><strong>排序的分类</strong></p>
<ul>
<li><p>内部排序（使用内部存储进行排序）</p>
</li>
<li><p>外部排序（数据量大时使用外部存储进行排序）</p>
</li>
</ul>
<p><strong>内部排序分为</strong></p>
<ul>
<li>插入排序<ul>
<li><strong>直接插入排序</strong></li>
<li>希尔排序</li>
</ul>
</li>
<li>选择排序<ul>
<li><strong>简单排序</strong></li>
<li>堆排序</li>
</ul>
</li>
<li>交换排序<ul>
<li><strong>冒泡排序</strong></li>
<li>快速排序</li>
</ul>
</li>
<li>归并排序</li>
<li>基数排序（桶排序的升级）</li>
</ul>
<p><strong>度量程序、算法执行时间的两种方法</strong></p>
<ul>
<li>事后统计法（需要实际运行；依赖于软硬件等环境因素）</li>
<li>事前估算法：通过分析某算法的<strong>时间复杂度</strong>来判断</li>
</ul>
<h4 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p><strong>时间频度</strong> T(n)：一个算法</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/10/31/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/SpringCloudAlibaba/20201031-springCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/31/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/SpringCloudAlibaba/20201031-springCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1/" class="post-title-link" itemprop="url">springCloud微服务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-31 00:00:00" itemprop="dateCreated datePublished" datetime="2020-10-31T00:00:00+00:00">2020-10-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/SpringCloudAlibaba/" itemprop="url" rel="index"><span itemprop="name">SpringCloudAlibaba</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/10/31/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/SpringCloudAlibaba/20201031-springCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1/" class="post-meta-item leancloud_visitors" data-flag-title="springCloud微服务" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/31/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/SpringCloudAlibaba/20201031-springCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/31/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/SpringCloudAlibaba/20201031-springCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>513</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="spring-技术体系演变"><a href="#spring-技术体系演变" class="headerlink" title="spring 技术体系演变"></a>spring 技术体系演变</h2><ol>
<li>spring</li>
<li>springboot</li>
<li>spring cloud netflix</li>
<li>spring cloud alibaba （微服务开发的一站式解决方案）</li>
</ol>
<h2 id="nacos"><a href="#nacos" class="headerlink" title="nacos"></a>nacos</h2><ul>
<li><p>配置管理</p>
</li>
<li><p>服务管理</p>
</li>
</ul>
<p>服务注册中心 + 配置中心（涉及CAP理论）</p>
<h2 id="feign"><a href="#feign" class="headerlink" title="feign"></a>feign</h2><p>feign = ribbon + hystricx</p>
<p>feign 对微服务的调用实际上也是类似使用 restTemplate 进行http 调用，只是进行了封装。</p>
<h2 id="gateway-amp-feign"><a href="#gateway-amp-feign" class="headerlink" title="gateway &amp; feign"></a>gateway &amp; feign</h2><p>gateway(API路由管理方式)： 提供统一的路由方式，基于filter链的方式提供网关基本功能（如安全、监控/指标，和限流）</p>
<h2 id="sentinal"><a href="#sentinal" class="headerlink" title="sentinal"></a>sentinal</h2><p>以流量为切入点，从流量控制、熔断降级、系统负载保护等多维度保护服务的稳定性</p>
<p>sentinal的限流配置可以与nacos配合使用（除此之外，sentinal还有很多配置的持久化方式）</p>
<h2 id="fescar"><a href="#fescar" class="headerlink" title="fescar"></a>fescar</h2><p>即seata，分布式事务解决方案</p>
<h2 id="skywalking"><a href="#skywalking" class="headerlink" title="skywalking"></a>skywalking</h2><p>服务链路追踪</p>
<p>常见的<strong>APM</strong>系统对比：zipkin vs pinpoint vs skywalking （Application Performance Management应用性能管理）</p>
<h2 id="gateway、sentinal、feign的关系和配合？？"><a href="#gateway、sentinal、feign的关系和配合？？" class="headerlink" title="gateway、sentinal、feign的关系和配合？？"></a>gateway、sentinal、feign的关系和配合？？</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/10/27/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20201027-%E5%AE%B9%E5%99%A8&%E5%90%8C%E6%AD%A5&%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20201027-%E5%AE%B9%E5%99%A8&%E5%90%8C%E6%AD%A5&%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8/" class="post-title-link" itemprop="url">容器&同步&并发容器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-27 00:00:00" itemprop="dateCreated datePublished" datetime="2020-10-27T00:00:00+00:00">2020-10-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">基础知识</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/10/27/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20201027-%E5%AE%B9%E5%99%A8&%E5%90%8C%E6%AD%A5&%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8/" class="post-meta-item leancloud_visitors" data-flag-title="容器&同步&并发容器" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/27/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20201027-%E5%AE%B9%E5%99%A8&%E5%90%8C%E6%AD%A5&%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/27/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20201027-%E5%AE%B9%E5%99%A8&%E5%90%8C%E6%AD%A5&%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.8k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="20201027-并发-amp-同步容器"><a href="#20201027-并发-amp-同步容器" class="headerlink" title="20201027-并发&amp;同步容器"></a>20201027-并发&amp;同步容器</h1><h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><p>nanos 毫微秒</p>
<p>nil 零/无</p>
<p>Deque  双端队列容器</p>
<h2 id="常用容器相关超类"><a href="#常用容器相关超类" class="headerlink" title="常用容器相关超类"></a>常用容器相关超类</h2><ul>
<li>Iterator(迭代器)<ul>
<li>不同类型的集合的操作方法基本上都是使用抽象迭代器来遍历集合元素进行相关操作，需要具体的迭代器实现类来实现迭代细节。（Iterator中没有涉及具体的数据结构和算法）</li>
</ul>
</li>
<li>Collection(单个元素对象的序列，下面三个子接口设计目的：最大程度抽象出元素的操作)<ul>
<li>List：一个有序的Collection（或者叫做序列）</li>
<li>Set</li>
<li>Queue</li>
</ul>
</li>
<li>Map(“键值对”映射表)</li>
</ul>
<h3 id="Map（散列表）"><a href="#Map（散列表）" class="headerlink" title="Map（散列表）"></a>Map（散列表）</h3><ul>
<li>遍历函数<ul>
<li><strong>keySet：Set<K></strong> （hashSet又由HashMap实现）</li>
<li>values：Set<V></li>
<li>entrySet：Set&lt;Map.Entry&lt;K, V&gt;&gt;</li>
</ul>
</li>
<li>类型<ul>
<li>HashMap<ul>
<li>tab hash数组</li>
<li>hash冲突链表保存元素</li>
</ul>
</li>
<li>LinkedHashMap<ul>
<li>继承HashMap</li>
</ul>
</li>
<li>TreeMap</li>
</ul>
</li>
</ul>
<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>函数</p>
<ul>
<li>add()：<ul>
<li>modCount ++ </li>
<li>扩容检查（涉及数组复制）</li>
</ul>
</li>
<li>remove()：<ul>
<li>modCount++;</li>
<li>把需要删除index后面的都往前移一位然后再把最后一个去掉。<ul>
<li>numMoved = size - index - 1</li>
<li>System.arraycopy(elementData, index+1, elementData, index, numMoved)</li>
<li>elementData[–size] = null; </li>
</ul>
</li>
</ul>
</li>
</ul>
<p>有序，可以重复</p>
<p>List包含特殊的遍历器：ListIterator，支持双向访问、允许从一个指定位置开始遍历</p>
<p><strong>ArrayList 继承了AbstractList且实现了List，但是AbstractList已经实现了List</strong></p>
<p><strong>AbstractList 内部类：</strong>Itr implements ListIterator；ListItr extends  Itr</p>
<p>equals 和 contains方法都使用了迭代器遍历来实现</p>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><ul>
<li>HashSet<ul>
<li><strong>使用HashMap实现</strong>，value是默认对象</li>
</ul>
</li>
<li>LinkedHashSet<ul>
<li>继承hashSet</li>
<li>使用LinkedHashMap实现</li>
<li>LinkedHashSet会根据add，remove这些操作的顺序在遍历时返回固定的集合顺序。这个顺序不是元素的大小顺序，而是可以保证2次遍历的顺序是一样的。</li>
</ul>
</li>
<li>TreeSet<ul>
<li>TreeSet内的元素必须实现Comparable接口</li>
</ul>
</li>
</ul>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><p>AbstractCollection<E>;、AbstractMap&lt;K,V&gt;、AbstractList<E>和AbstractSet<E></p>
<p>各个集合的关键区别就在每个集合所使用的数据结构和算法上，所以在<strong>抽象类</strong>层面都没有涉及具体的数据结构和算法，只对操作这些数据结构的方法做了基本实现。</p>
<h2 id="AbstractList"><a href="#AbstractList" class="headerlink" title="AbstractList"></a>AbstractList<E></h2><p><strong>AbstractList 内部类：</strong>Itr implements ListIterator；ListItr extends  Itr</p>
<h2 id="AbstractMap-lt-K-V-gt"><a href="#AbstractMap-lt-K-V-gt" class="headerlink" title="AbstractMap&lt;K,V&gt;"></a>AbstractMap&lt;K,V&gt;</h2><p>implements Map&lt;K,V&gt;，实现了除entrySet()方法外的基本所有方法；</p>
<p>返回键集的Set<K> keySet()和返回值集的Collection<V> values()：返回来一个实现Set<K>或Collection<V>的类对象，类对象的所有操作都是在原映射表的基础上进行的，这种操作叫视图。（重写AbstractSet的一个匿名内部类返回）</p>
<h2 id="ArrayList-amp-LinkList"><a href="#ArrayList-amp-LinkList" class="headerlink" title="ArrayList &amp; LinkList"></a>ArrayList &amp; LinkList</h2><p>ArrayList<E>通过数组实现：数组中元素间的内存地址是连续的、只能存储一种类数据类型的元素。数组长度固定</p>
<p>LinkList<E>使用了双向链表；LinkList继承了Deque<E>接口，实现<strong>双端队列</strong>头尾进出的特点。</p>
<p>链表的特点：长度不固定，可以随时增加和减少、链表中的元素在内存地址上可以是连续的，也可以是不连续的</p>
<p>ArrayList 继承了AbstractList且实现了List</p>
<p>ArrayList  在添加元素之前会进行容量检查；扩容目标容量大小为原容量的1.5倍；扩容涉及数组的复制</p>
<p>在遍历元素上ArrayList<E>存在更有效的方式，他实现了RandomAccess接口，代表ArrayList<E>支持快速访问。 RandomAccess本身是一个空接口，这种接口一般用来代表一类特征，RandomAccess代表实现类具有快速访问的特征。</p>
<p>LinkedList 添加对象时需要创建Node对象而开辟内存空间；</p>
<p>LinkedList元素在将元素插入到链表中间位置的场景耗时很久；插入到头部最快。</p>
<p>LinkedList添加第一个元素的时候，first=last=newNode;</p>
<p>LinkedList add(i, ele)时，将下标为i的元素的prev元素节点（如果为null，则ele为first节点），作为ele的prev元素节点，当前元素ele的next节点指向下标为i的元素；再将下标为i的元素的节点的prev元素节点指向当前元素ele；（linkBefore）</p>
<p>LinkedList根据下标i索引元素的方式：对比下标跟链表长度的一半，判断是在前半部分还是后半部分，若是前半部分，则从first节点向后遍历；否则从last节点前序遍历</p>
<p><strong>问题：</strong></p>
<p>1、为什么链表将元素插入到链表中间位置耗时最近？</p>
<p>2、为很么链表将元素插入到链表头部的时间与插入到尾部的时间不一致？</p>
<h2 id="红黑树、TreeMap与TreeSet"><a href="#红黑树、TreeMap与TreeSet" class="headerlink" title="红黑树、TreeMap与TreeSet"></a>红黑树、TreeMap与TreeSet</h2><p>Map&amp;Set: 不能添加重复元素的集，不能通过索引来访问的集; (由数组实现的散列表+链表/红黑树)</p>
<p>Set由Map实现,但是Set继承自Collection集合,而map为键值映射</p>
<p>TreeMap: 每次put元素时会遍历比较key值,优先使用比较器进行比较,后使用默认的compareTo方法比较;<strong>TreeMap.Entry</strong> implements Map.Entry, 即红黑树</p>
<h2 id="CopyOnWriteList"><a href="#CopyOnWriteList" class="headerlink" title="CopyOnWriteList"></a>CopyOnWriteList</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> CopyOnWriteList&lt;&gt;(); <span class="comment">// list引用地址 #list001, list.array引用地址 # array001</span></span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.sort(Integer.compareTo()); <span class="comment">// list引用地址不变，list.array引用地址 #array002</span></span><br><span class="line">list.add(<span class="number">2</span>); <span class="comment">// list引用地址不变，list.array引用地址 #array003</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ArrayList 在add元素时不会修改数组的指向</li>
<li>ArrayList 和 CopyOnWriteList 在sort时都会修改数组的指向</li>
<li>ArrayList 在使用iterator遍历时，首先会记录当前list修改操作的次数n，后续遍历执行next()时会检查n是否修改，如果修改，则抛出ConcurrentModificationException（遍历外部类的最新数组）；CopyOnWriteList 则能正常遍历，因为遍历的是旧的引用数组。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/09/25/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200925-Git%E5%86%85%E5%AE%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/25/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200925-Git%E5%86%85%E5%AE%B9/" class="post-title-link" itemprop="url">Git内容</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-25 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-25T00:00:00+00:00">2020-09-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" itemprop="url" rel="index"><span itemprop="name">版本控制</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/09/25/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200925-Git%E5%86%85%E5%AE%B9/" class="post-meta-item leancloud_visitors" data-flag-title="Git内容" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/25/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200925-Git%E5%86%85%E5%AE%B9/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/25/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200925-Git%E5%86%85%E5%AE%B9/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.9k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="git常用场景使用技巧"><a href="#git常用场景使用技巧" class="headerlink" title="git常用场景使用技巧"></a><strong>git常用场景使用技巧</strong></h3><ol>
<li><p>功能开发到一半，突然要修复线上问题 （保存现场）</p>
<ol>
<li>在开发分支上：<code>git stash</code> = <code>git stash save</code> 保存未提交的内容（<strong>前提是修改的文件已被版本库追踪过</strong>）<ol>
<li>想要添加保存信息则执行：<code>git stash save -a “message”</code> （git stash save 命令将来会被git stash push 代替）</li>
<li>默认情况下，<code>git stash</code> 只会贮藏已修改和暂存的 <strong>已跟踪</strong> 文件。如果指定 –include-untracked 或 -u 选项，Git 也会贮藏任何未跟踪文件。</li>
</ol>
</li>
<li>切换到其他分支修复bug</li>
<li>修复完后回到原开发分支，并执行 <code>git stash pop</code> (<code>git stash pop</code> = <code>git stash apply  stash@&#123;0&#125;</code> + <code>git stash drop  stash@&#123;0&#125;</code>)</li>
</ol>
</li>
<li><p>不小心把代码提交到错的分支上 （<strong>假设错误分支为test，目标分支为 dev</strong> ）</p>
<ol>
<li><strong>简易操作</strong>：切换到在目标分支dev下执行-&gt; <code>git cherry-pick commitId1 commitId2</code> …</li>
<li><strong>git rebase</strong>：<code>git rebase --onto dev &lt;开始的commitId&gt; &lt;结束的commitId&gt; </code><ol start="2">
<li>执行上述操作后，实际上git 会将dev作为基底分支，将 &lt;开始的commitId&gt; &lt;结束的commitId&gt;  做的相应改变重做一遍，重做的commitId可能跟旧的commitId不一样（若是能ff，则commitId一样），重做后，HEAD指针指向最新的commitId上（游离状态，没有指向任何分支上）</li>
<li>切换到目标分支 <code> git checkout dev</code></li>
<li>将dev分支指向重做的最新的提交点上 <code>git reset --hard  commitId</code> （也属于变基操作，会产生线性提交历史）</li>
</ol>
</li>
</ol>
</li>
<li><p>需要将其他分支的文件复用过来：</p>
<ol>
<li><code>git checkout source_path(其他分支) filename1 filename2 ... (其他分支的文件) </code></li>
</ol>
</li>
<li><p>需要删除中途某次提交：git revert </p>
<ol>
<li><code>git revert commitID</code> 使用一次新的commit来回滚之前的commit</li>
<li>revert 是逆向回放</li>
</ol>
</li>
<li><p><strong>本地仓库</strong>需要回退到某个版本（亦可用于版本前进）：git reset</p>
<ol>
<li> <code>git reset --hard commitId</code> ： 将 commitId 和 commitId 之后的所有提交记录均删除；但是如果 merge 其他老的分支到该分支，commitId后面被回滚的commit应该还会被引入<strong>（一般在提交点push到公共分支之前操作）</strong></li>
<li><code>git reset --soft commitId</code>：此次提交之后的修改会被退回到暂存区。(回退版本<strong>commitId后的修改还保留在本地工作空间</strong>)</li>
<li><code>git reset commitId</code> 默认使用选项 –mixed，此次提交之后的修改会被退回到工作区</li>
<li><code>git reset</code> 用于将当前分支指向任意提交点，包括其他分支的提交点，即可在任意提交点来回穿梭</li>
</ol>
</li>
<li><p>代码版本回退错误，想要重新回到最新提交点，但是提交历史已丢失了（通过git log 查看不到提交记录）</p>
<ol>
<li>使用 <code>git reflog</code> 查看历史操作记录，找到对应要恢复的提交点，执行 git reset 相关方法</li>
</ol>
</li>
<li><p>已经推送到远程公共分支的代码版本正确的回退姿势（<strong>暂时未理解原理</strong>）</p>
<ol>
<li><code>git reset --hard commitId1</code>（要回退的版本）：该操作把 working, index, HEAD 都强行置为 commitId1</li>
<li><code>git reset --soft commitId2</code>（最新提交点）</li>
</ol>
</li>
<li><p><strong>本地仓库</strong>，存在多余的提交，想要压缩成一次提交</p>
<ol>
<li>将上一次提交和这次提交作为一次提交 <code>git commit --amend</code> </li>
<li>多次提交压缩：<code>git rebase -i HEAD~n</code>  (n表示要合并的最近提交的次数)</li>
<li><strong>（一般在提交点push到公共分支之前操作）</strong></li>
</ol>
</li>
<li><p><code>git merge</code> 合并时建议使用 <code>--no--ff</code> 选项保留完整的提交历史（<strong>否则该命令默认策略：“优先–ff，若不能ff则–no-ff”</strong>）</p>
</li>
<li><p>比较各个区域的修改差异</p>
<ol>
<li>git diff – cached：比较缓存区与本地库最近一次commit内容</li>
</ol>
<ul>
<li>git diff：比较缓存区与工作区 </li>
<li>git diff HEAD | git diff commitId 比较工作区与本地最近一次commit内容 （工作区会包含已暂存和未暂存的文件内容）</li>
</ul>
</li>
<li><p>想要查看某次提交做了哪些改动</p>
<ol>
<li><code>git show commitId</code> (相较以下命令常用)</li>
<li><code>git show HEAD@&#123;5&#125;</code>  查看仓库中 HEAD 在五次前的所指向的提交</li>
</ol>
</li>
<li><p>版本迭代发布之际，需要合并其他分支的代码时，查看哪些分支已合并或未合并到当前分支</p>
<ol>
<li>查看哪些分支已经合并到当前分支：git branch –merged </li>
<li>查看哪些分支没有合并到当前分支 git branch –no-merged </li>
</ol>
</li>
<li><p>查看某分支还有哪些提交尚未合并到主分支？</p>
<ol>
<li><strong>双点</strong>：<ol>
<li>在 feature 分支中而不在 master 分支中的提交：<code>git log master..feature</code> </li>
<li>在你当前分支中而不在远程 <code>origin</code> 中的提交：<code>git log origin/master..HEAD</code></li>
</ol>
</li>
<li><strong>三点</strong>：<ol>
<li>想看 master 或者 feature 中包含的但不是两者共有的提交：<code>git log master...feature</code> </li>
<li>增加 –left-right 选项可以显示每个提交到底处于哪一侧的分支</li>
</ol>
</li>
<li><strong>多点</strong>：<ol>
<li>^ 字符或者 –not 来指明你不希望提交被包含其中的分支（以下命令等价）<ol>
<li>git log refA..refB</li>
<li>git log ^refA refB</li>
<li>git log refB –not refA</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>概念</strong></p>
<ol>
<li>本地跟踪分支、远程跟踪分支、远程分支 （pull = fetch + merge）</li>
</ol>
<hr>
<h3 id="其他知识点补充"><a href="#其他知识点补充" class="headerlink" title="其他知识点补充"></a><strong>其他知识点补充</strong></h3><ol>
<li><p>变基 &amp; git merge 区别、commitId 的时间线是否有序</p>
<ol>
<li>变基：以另一个分支为基底分支，保留基底分支在共同祖先之后的提交，再将两个分支<strong>最近的</strong>一个<strong>共同祖先</strong>之后的属于”当前变基操作分支”的提交点，<strong>重做</strong>到基底分支上(<strong>commitId会发生变化</strong>)，均作为当前变基操作分支的内容。</li>
<li>变基后将内容merge 到另一个分支时会丢失该分支提交历史</li>
</ol>
</li>
<li><p>git rebase –onto master &lt;开始的commitId&gt; &lt;结束的commitId&gt; （游离指针 HEAD)</p>
<ol>
<li>git rebase master feature ：将feature分支以master作为基底分支，将feature分支上在共同祖先之后的提交点重做一遍 （省去切换分支到feature上的操作）</li>
<li>git rebase –onto master feature feature-child1 ：将feature分支以master作为基底分支，将feature分支上在共同祖先之后的提交点重做一遍，但暂时并不想合并 feature-child1 中的修改 （feature-child1一般是feature的子分支）</li>
</ol>
</li>
<li><p>Git 合并两个分支时，<strong>如果顺着一个分支走下去可以到达另一个分支的话</strong>，那么 Git 在合并两者时，只会简单地把指针右移，叫做“快进”（fast-forward）（<strong>如果不能到达另一个分支，则会执行 –no-ff</strong> ）</p>
<ol>
<li>非ff：Merge made by the ‘recursive’ strategy. （通过“递归”策略进行合并）</li>
<li>merge 时可以指定提交信息 -m</li>
</ol>
</li>
<li><p>git reset –hard commitId 用于将当前分支指向任意提交点，包括其他分支的提交点</p>
</li>
<li><p>git checkout 可以将 HEAD 引用 指向到任意提交点（游离状态-HEAD指针没有指向对象的分支）</p>
</li>
<li><p>Git push 时如何避免出现 “Merge branch ‘master’ of …”</p>
<ol>
<li>每次从远程分支 pull 新的变动，其实都会执行一次 git merge &lt;远程仓库&gt;/&lt;远程分支&gt;</li>
<li>git pull = git fetch + git merge ：若你本地的远程跟踪分支落后于远程分支，且在这段时间你还在本地分支进行开发并且做了提交，之后你使用git fetch 拉取远程最新的改动，这个时候你的远程跟踪分支与本地开发分支的提交历史就会产生分叉，执行 git pull 或 git merge origin/master的话就会产生合并记录（**–no-ff**）</li>
<li>可以使用 git pull –rebase （git fetch + git rebase） 变基方式去除自动生成的 log 信息<ol>
<li>从 remote 分支拉取更新到本地时，使用 rebase。</li>
<li>当完成 bug 修复或新功能时，使用 merge 将子分支合并到主分支。</li>
<li>没有人应该 rebase 一根共享的分支。</li>
</ol>
</li>
</ol>
</li>
<li><p>HEAD：</p>
<ol>
<li>HEAD就是当前活跃分支的游标。</li>
<li>HEAD并非只能指向分支的最顶端，实际上它可以指向任何一个提交节点，它就是 Git内部用来追踪当前位置的东东。</li>
</ol>
</li>
<li><p><code>git checkout -b mybranch origin/mybranch</code> (可以指定本地分支名)</p>
<p>= <code>git checkout --track origin/mybranch</code></p>
<p>= <code>git checkout origin/mybranch</code> </p>
</li>
<li><p>查看某次提交的改动</p>
<ol>
<li><code>git show commitId</code></li>
</ol>
</li>
<li><p>查看二进制对象文件：</p>
<ol>
<li>git的底层命令：git cat-file -p HEAD (-p： pretty-print object’s content)</li>
</ol>
</li>
<li><p>通过具体指定一个提交来拉取该文件的对应版本：</p>
<ol>
<li><code>git reset eb43bf file.txt</code></li>
</ol>
</li>
<li><p>查看某个文件中内容的更改记录：</p>
<ol>
<li>git blame -L 69,82 Makefile （每一行分别来自哪个提交和提交者，-L可以指定行数）</li>
</ol>
</li>
<li><p>二分查找 git bisect</p>
</li>
<li><p> <code>--patch</code> 选项</p>
</li>
<li><p>打包本地仓库：git bundle create repo.bundle HEAD master</p>
</li>
<li><p>git 撤销commit中单个文件的修改：（未验证）</p>
<ul>
<li>git log <fileName>（首先查询这个文件的log）</li>
<li>git reset <commit-id> <fileName> （其次查找到这个文件的上次commit id xxx，并对其进行reset操作）</li>
<li> git checkout <fileName> 撤销对此文件的修改</li>
<li>git commit –amend + git push origin <remoteBranch> （最后amend一下，再push上去）</li>
</ul>
</li>
</ol>
<hr>
<h3 id="Git开发工作流"><a href="#Git开发工作流" class="headerlink" title="Git开发工作流"></a>Git开发工作流</h3><p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903635533594632#heading-0">https://juejin.im/post/6844903635533594632#heading-0</a></p>
<ol>
<li>可以 <strong>在本地</strong> 随便重写历史记录（推送到远程公共分支之前）。 但是在对提交内容感到满意并准备与他人分享之前，应当避免推送你的工作。</li>
</ol>
<h3 id="GIt工具"><a href="#GIt工具" class="headerlink" title="GIt工具"></a>GIt工具</h3><ol>
<li><p>如何选择修订版本（即提交点）</p>
<ol>
<li><strong>简短的 SHA-1</strong>：可使用简短的 SHA-1来指定唯一的修订版本</li>
<li><strong>祖先引用</strong>：使用 ~ 或者 ^ 指定上一个父提交，~n 或者 ^ n指向前N个父提交，用法如下<ol>
<li>HEAD~3：当前HEAD指针指向的提交点的第三父提交</li>
<li>commitId~~：该提交点的第二父提交点</li>
</ol>
</li>
</ol>
</li>
<li><p>交互式暂存 <code>git add -i</code> 更友好的操作界面</p>
</li>
<li><p>贮藏与清理</p>
<ol>
<li>从贮藏创建一个分支：git stash branch testchanges</li>
<li>清理工作目录：<ol>
<li>git clean；默认情况下，git clean 命令只会移除没有忽略的未跟踪文件。 </li>
<li>git clean -i：交互式清理</li>
<li> git clean -f -d：移除工作目录中所有未追踪的文件以及空的子目录。</li>
<li>git clean -n（或者–dry-run）：“做一次演习然后告诉你 将要 移除什么”；要查看空目录需加上-d选项</li>
</ol>
</li>
</ol>
</li>
<li><p>重写历史：</p>
<ol>
<li>修改提交记录：git rebase -i （可以压缩提交或者拆分提交）<ol>
<li>squash 压缩提交到前一次提交</li>
<li>edit 进入对应提交点上，可以在做相应修改并提交到历史线上。</li>
</ol>
</li>
<li>修改大批量的提交：(<strong>未测试通过</strong>)<ol>
<li>删除某次提交中引入的某个文件（如密码文件），且在所有的提交点中都恢复不了该文件： <code>git filter-branch --tree-filter &#39;rm -f passwords.txt&#39; HEAD</code></li>
</ol>
</li>
</ol>
</li>
<li><p>关于重置（ <code>reset</code> 和 <code>checkout</code>）</p>
<ol>
<li>首先要了解git中的三棵树：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HEAD</span><br><span class="line">上一次提交的快照，下一次提交的父结点</span><br><span class="line">Index</span><br><span class="line">预期的下一次提交的快照</span><br><span class="line">Working Directory</span><br><span class="line">沙盒</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>HEAD</strong> 是当前分支引用的指针，它总是指向该分支上的最后一次提交。这表示 HEAD 将是下一次提交的父结点。通常，理解 HEAD 的最简方式，就是将它看做 该分支上的最后一次提交 的快照。<ol>
<li>递归查看树结构：git ls-tree -r HEAD</li>
<li>查看二进制对象文件：git的底层命令：git cat-file -p HEAD (-p： pretty-print object’s content)</li>
</ol>
</li>
<li><strong>索引</strong>是你的 预期的下一次提交。 <ol>
<li>Git 将上一次检出到工作目录中的所有文件填充到索引区，它们看起来就像最初被检出时的样子。（<strong>git的每次提交都是全量文件的快照</strong>） 之后你会将其中一些文件替换为新版本，接着通过 git commit 将它们转换为树来用作新的提交。</li>
<li>git ls-files -s</li>
</ol>
</li>
<li>可以把<strong>工作目录</strong>当做 沙盒。<ol>
<li>HEAD、索引树 将工作区的文件的内容存储在 .git 文件夹中。而工作目录会将它们解包为实际的文件以便编辑。</li>
<li>在将修改提交到暂存区并记录到历史之前，可以随意更改工作目录的文件内容。</li>
</ol>
</li>
<li><strong>切换分支或克隆的过程：</strong>当检出一个分支时，它会修改 <strong>HEAD</strong> 指向新的分支引用，将 <strong>索引</strong> 填充为该次提交的快照， 然后将 <strong>索引</strong> 的内容复制到 <strong>工作目录</strong> 中。</li>
<li>git reset 到底做了什么？<ol>
<li>先了解文件提交到版本库的链路：工作树 -&gt; 索引树 -&gt; 对象区(HEAD所指向)；回退的链路则反之</li>
<li>移动 HEAD的指向：与改变 HEAD 自身不同（checkout 所做的）；reset 移动 HEAD 指向的分支所指向的提交点。（<strong>可以理解为，HEAD是一个引用/指针，指针指向分支对象，相当于HEAD的实际对象是分支对象，reset 是修改这个HEAD对象的commitId属性（调用分支对象的setter方法）；而checkout相当于修改HEAD的引用，引用另一个对象</strong>）</li>
<li>git reset –soft：（移动 HEAD 分支的指向）撤销了上一次 git commit 命令，<strong>然后停止</strong>；HEAD树回退到上一次提交的版本，工作区、索引树不变。</li>
<li>git reset –mixed：（使索引看起来像 HEAD）撤销 commit、取消暂存 add ，<strong>然后停止</strong></li>
<li>git reset –hard：（使工作目录看起来像索引）撤销 commit、取消暂存 add ，还原工作区内容</li>
</ol>
</li>
<li>通过具体指定一个提交来拉取该文件的对应版本：<ol>
<li><code>git reset eb43bf file.txt</code> (更新索引)</li>
<li><code>git checkout eb43bf file.txt</code>  (更新索引树和工作空间)</li>
</ol>
</li>
</ol>
</li>
<li><p>git commit操作逻辑：</p>
<ol>
<li>取得索引中的内容并将它保存为一个永久的快照，然后创建一个指向该快照的提交对象</li>
<li>最后更新 master 来指向本次提交 （HEAD会一直指向当前分支，而该分支会指向最后一次提交的快照（即对象区的内容））</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/09/18/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200918-Git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/18/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200918-Git/" class="post-title-link" itemprop="url">Git</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-18 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-18T00:00:00+00:00">2020-09-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" itemprop="url" rel="index"><span itemprop="name">版本控制</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/09/18/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200918-Git/" class="post-meta-item leancloud_visitors" data-flag-title="Git" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/18/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200918-Git/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/18/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/20200918-Git/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.4k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>git merge  加不加 –no-ff：fast-forward<br><a target="_blank" rel="noopener" href="https://juejin.im/post/6844904013326991368">https://juejin.im/post/6844904013326991368</a></p>
<p>git rebase 推不推荐使用<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/29682134">https://zhuanlan.zhihu.com/p/29682134</a></p>
<p>git 中HEAD的概念, 经过merge, pull等操作后, HEAD会否改变<br><a target="_blank" rel="noopener" href="https://juejin.im/entry/6844903493078089736">https://juejin.im/entry/6844903493078089736</a></p>
<h2 id="git-基础"><a href="#git-基础" class="headerlink" title="git 基础"></a>git 基础</h2><h3 id="git-是什么？"><a href="#git-是什么？" class="headerlink" title="git 是什么？"></a>git 是什么？</h3><p>分布式版本控制系统</p>
<h3 id="git-有什么用？"><a href="#git-有什么用？" class="headerlink" title="git 有什么用？"></a>git 有什么用？</h3><p>分布式：相比集中式，有去中心化的优势<br>安全性：每个人电脑里都有完整的版本库</p>
<p>强大的分支管理？往下看</p>
<h3 id="git安装"><a href="#git安装" class="headerlink" title="git安装"></a>git安装</h3><p>自己从官网下载</p>
<h2 id="基本术语"><a href="#基本术语" class="headerlink" title="基本术语"></a>基本术语</h2><ul>
<li><p><code>repository</code>: Git仓库，是commit的集合，仅此而已</p>
</li>
<li><p><code>working tree</code>: 当前文件系统的工作目录，不包括.git</p>
</li>
<li><p><code>index</code>: 暂存区，即将成为一个新的commit的临时节点</p>
</li>
<li><p><code>commit</code>: 可以理解为working tree在某个时间点的一个快照(snapshot)，当然只记录了增量的文件修改</p>
</li>
<li><p><code>branch</code>: Git分支，实质是指向某个commit的指针，有一个别名如<strong>dev</strong>，随着这个分支的提交，这个分支对应指针会指向新的HEAD</p>
</li>
<li><p><code>tag</code>: tag和branch都是指向某个commit的指针，也有一个别名，唯一区别是，tag指向一个commit，指针不会再移动。</p>
</li>
<li><p><code>master</code>: 提交主要分支，系统建立的第一个分支</p>
</li>
<li><p>```plaintext<br>HEAD</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  重要概念：一个commit指针，用于记录工作区当前checkout的分支状态</span><br><span class="line"></span><br><span class="line">  - 若checkout的是一个branch，那么HEAD指针直接指向该branch</span><br><span class="line">  - 若checkout的是一个tag或是一个commit的hash id，那么HEAD处于detatch状态</span><br><span class="line"></span><br><span class="line">- &#96;tree&#96;: Git中的的树形结构，类似于目录，tree可以包含多个tree，也可以包含blob，blob是叶子节点，tree是非叶子节点</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 三个空间</span><br><span class="line"></span><br><span class="line">工作目录、暂存区域以及 Git 仓库</span><br><span class="line"></span><br><span class="line">- 工作区是对项目的某个版本独立提取出来的内容。</span><br><span class="line">- 暂存区是一个文件，保存了下次将要提交的文件列表信息，一般在 Git 仓库目录中。 按照 Git 的术语叫做“索引”，不过一般说法还是叫“暂存区”。</span><br><span class="line">- Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 开始用Git</span><br><span class="line"></span><br><span class="line">### 命令说明</span><br><span class="line"></span><br><span class="line">git help &lt;verb&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 基本配置</span><br><span class="line"></span><br><span class="line">#### git config </span><br><span class="line"></span><br><span class="line">查看或设置：git config &lt;--system&#x2F;--global&#x2F;--local&gt; &lt;var-name&gt; &lt;var-value&gt; </span><br><span class="line"></span><br><span class="line">系统变量 -- global ：&#x2F;etc&#x2F;gitconfig</span><br><span class="line"></span><br><span class="line">用户变量 -- system：~&#x2F;.gitconfig</span><br><span class="line"></span><br><span class="line">仓库变量 -- local：.git&#x2F;config </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 查看所有的配置以及它们所在的配置文件路径</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;console</span><br><span class="line">git config --list --show-origin</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="相关配置"><a href="#相关配置" class="headerlink" title="相关配置"></a>相关配置</h4><p>user.name</p>
<p>user.email</p>
<p>命令别名：alias.co checkout （设置checkout别名为co)</p>
<h4 id="配置忽略版本控制"><a href="#配置忽略版本控制" class="headerlink" title="配置忽略版本控制"></a>配置忽略版本控制</h4><p>.gitignore 列出要忽略的文件的模式</p>
<ul>
<li>所有空行或者以 <code>#</code> 开头的行都会被 Git 忽略。</li>
<li>可以使用标准的 glob 模式匹配，它会递归地应用在整个工作区中。</li>
<li>匹配模式可以以（<code>/</code>）开头防止递归。</li>
<li>匹配模式可以以（<code>/</code>）结尾指定目录。</li>
<li>要忽略指定模式以外的文件或目录，可以在模式前加上叹号（<code>!</code>）取反。</li>
</ul>
<h3 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h3><h4 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h4><p>命令说明：将尚未进行版本控制的本地目录转换为 Git 仓库；</p>
<p>命令结果：创建一个名为 <code>.git</code> 的子目录，含有你初始化的 Git 仓库中所有的必须文件，这些文件是 Git 仓库的骨干。</p>
<h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><p>从其它服务器 <strong>克隆</strong> 一个已存在的 Git 仓库</p>
<h3 id="GIt的三种状态"><a href="#GIt的三种状态" class="headerlink" title="GIt的三种状态"></a>GIt的三种状态</h3><p>（已跟踪 或 未跟踪）</p>
<p>（未修改）已修改（modified）  已暂存（staged）已提交（committed）</p>
<ul>
<li>已修改表示修改了文件，但还没保存到数据库中。</li>
<li>已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。</li>
<li>已提交表示数据已经安全地保存在本地数据库中。</li>
</ul>
<p>如果 Git 目录中保存着特定版本的文件，就属于 <strong>已提交</strong> 状态。 如果文件已修改并放入暂存区，就属于 <strong>已暂存</strong> 状态。 如果自上次检出后，作了修改但还没有放到暂存区域，就是 <strong>已修改</strong> 状态。</p>
<h3 id="使用git管理文件"><a href="#使用git管理文件" class="headerlink" title="使用git管理文件"></a>使用git管理文件</h3><h4 id="查看仓库文件状态"><a href="#查看仓库文件状态" class="headerlink" title="查看仓库文件状态"></a>查看仓库文件状态</h4><p><code>git status -s</code> 命令或 <code>git status --short</code> 命令，你将得到一种格式更为紧凑的输出</p>
<h4 id="查看仓库文件详细修改"><a href="#查看仓库文件详细修改" class="headerlink" title="查看仓库文件详细修改"></a>查看仓库文件详细修改</h4><p>git diff：比较工作目录中当前文件和<strong>暂存区域快照</strong>之间的差异</p>
<p>git diff –staged：比对已暂存文件与最后一次提交的文件差异</p>
<h4 id="提交暂存区的变化"><a href="#提交暂存区的变化" class="headerlink" title="提交暂存区的变化"></a>提交暂存区的变化</h4><p>git commit：提交时记录的是放在<strong>暂存区域的快照</strong>。</p>
<p>跳过使用暂存区域：git commit -a （跳过git add）</p>
<h4 id="移除文件"><a href="#移除文件" class="headerlink" title="移除文件"></a>移除文件</h4><p>git rm：从 Git 中移除某个文件，即从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。 </p>
<p>git rm –cached：从 Git 仓库中删除（亦即从暂存区域移除），但仍然保留在当前工作目录中</p>
<h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><p>git log：列出每个提交的 SHA-1 校验和、提交时间以及提交说明。</p>
<p>git log -patch：显示每次提交所引入的差异（按 <strong>补丁</strong> 的格式输出）。</p>
<p>git log -stat：看到每次提交的简略统计信息</p>
<p>git log –pretty：使用不同于默认格式的方式展示提交历史（git log –pretty=oneline）</p>
<p>git log –graph：添加了一些 ASCII 字符串来形象地展示你的分支、合并历史（图形化）</p>
<h4 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h4><p>git commit –amend：最新的提交将代替上一次提交的结果。（且将当前暂存区中的文件提交）</p>
<p>git restore <file> ：to discard changes in working directory</p>
<p>git restore –staged <file>…：to unstage</p>
<p>git reset –hard HEAD^ / <commitId>：撤销提交</p>
<h3 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h3><h4 id="查看远程服务器列表"><a href="#查看远程服务器列表" class="headerlink" title="查看远程服务器列表"></a>查看远程服务器列表</h4><p>git remote</p>
<p>git remote -v：详细信息</p>
<h4 id="添加远程仓库"><a href="#添加远程仓库" class="headerlink" title="添加远程仓库"></a>添加远程仓库</h4><p>git remote add <shortname> <url> （shortname是别名、简写）</p>
<p>命令行中使用<strong>简写</strong>来代替整个 URL</p>
<p>git remote rename <shortname> <new-shortname></p>
<p>git remote remove <shortname></p>
<h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><p>先不学它</p>
<h3 id="git特性-分支特性"><a href="#git特性-分支特性" class="headerlink" title="git特性-分支特性"></a>git特性-分支特性</h3><p>Git 保存的不是文件的变化或者差异，而是一系列不同时刻的<strong>快照</strong> 。</p>
<p>在进行提交操作时，Git 会保存一个<strong>提交对象</strong>（commit object）。提交对象会包含一个指向暂存内容快照的指针。提交对象还包含了作者的姓名和邮箱、提交时输入的信息以及指向它的<strong>父对象的指针</strong>。</p>
<ul>
<li>首次提交产生的提交对象没有父对象，普通提交操作产生的提交对象有一个父对象， 而由多个分支合并产生的提交对象有多个父对象 </li>
</ul>
<p><code>git add</code> ：暂存操作会为每一个文件计算校验和（ <strong>SHA-1 哈希算法，长度为 40 的 SHA-1 值字符串</strong>），然后会把当前版本的文件快照保存到 Git 仓库中 （Git 使用 <strong><em>blob</em> 对象</strong>来保存它们），最终将校验和加入到暂存区域等待提交。</p>
<p><code>git commit</code> :</p>
<ol>
<li>Git 会先计算每一个子目录的校验和， 然后在 Git 仓库中这些校验和保存为树对象。</li>
<li>随后，Git 便会创建一个提交对象， 它除了包含上面提到的那些信息外，还包含指向这个树对象（项目根目录）的指针。 如此一来，Git 就可以在需要的时候重现此次保存的快照。</li>
</ol>
<p><strong>Git 仓库包含对象</strong>：blob 对象（保存着文件快照）、一个 <strong>树</strong> 对象 （记录着目录结构和 blob 对象索引）以及一个 <strong>提交</strong> 对象（包含着指向前述树对象的指针和所有提交信息）。</p>
<h4 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h4><p>是一个指针，指向当前所在的本地分支</p>
<h4 id="检出操作"><a href="#检出操作" class="headerlink" title="检出操作"></a>检出操作</h4><ol>
<li>使 HEAD 指回 <code>master</code> 分支</li>
<li>将工作目录恢复成 <code>master</code> 分支所指向的快照内容</li>
</ol>
<p>git log –oneline –decorate –graph –all</p>
<h4 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h4><p>git merge</p>
<h5 id="快速合并—快进（fast-forward）"><a href="#快速合并—快进（fast-forward）" class="headerlink" title="快速合并—快进（fast-forward）"></a>快速合并—快进（fast-forward）</h5><p>简单的将指针向前推进（指针右移），因为这种情况下的合并操作没有需要解决的分歧</p>
<h5 id="三方合并"><a href="#三方合并" class="headerlink" title="三方合并"></a>三方合并</h5><p>若当前分支所在提交并不是待合并分支所在提交的直接祖先，git不会进行 <code>ff</code>， 而会使用两个分支的末端所指的快照（<code>C4</code> 和 <code>C5</code>）以及这两个分支的公共祖先（<code>C2</code>），做一个简单的三方合并。</p>
<p>Git 将三方合并的结果做了一个新的快照并且自动创建一个新的提交指向它。 这个被称作一次合并提交，它的特别之处在于他有不止一个父提交。（指向 父提交对象 + 新的暂存文件快照？ ）</p>
<h5 id="遇到冲突时的分支合并"><a href="#遇到冲突时的分支合并" class="headerlink" title="遇到冲突时的分支合并"></a>遇到冲突时的分支合并</h5><p><code>HEAD</code> 所指示的版本即当前分支所在的位置，因为你在运行 merge 命令的时候已经检出到了这个分支</p>
<p>图形化工具：git mergetool</p>
<h4 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h4><p>git branch -v：查看每一个分支的最后一次提交</p>
<p>–merged 与 –no-merged 可以过滤这个列表中已经合并或尚未合并到当前分支的分支。</p>
<h4 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h4><p> <code>git ls-remote &lt;remote&gt;</code> ：显式地获得远程引用的完整列表</p>
<p> <code>git remote show &lt;remote&gt;</code> 获得远程分支的更多信息</p>
<h4 id="远程跟踪分支"><a href="#远程跟踪分支" class="headerlink" title="远程跟踪分支"></a>远程跟踪分支</h4><p>本地会有指向远程分支的不可以修改的<strong>指针</strong>-跟踪分支（使用git fetch来同步本地和远程指针）</p>
<p>可以运行 <code>git merge 远程仓库别名/x远程分支名</code> 将这些工作合并到当前所在的分支。（远程跟踪分支）</p>
<p>如果想要在远程分支上工作，可以将其建立在远程跟踪分支之上</p>
<p><code>git checkout -b 本地分支名 远程仓库别名/远程分支名</code></p>
<h4 id="跟踪分支"><a href="#跟踪分支" class="headerlink" title="跟踪分支"></a>跟踪分支</h4><p>远程跟踪分支 vs 跟踪分支</p>
<p><code>git checkout -b 本地分支名 远程仓库别名/远程分支名</code></p>
<p>从一个远程跟踪分支检出一个本地分支会自动创建所谓的“跟踪分支”（它跟踪的分支叫做“上游分支”）。 跟踪分支是与远程分支有直接关系的本地分支。 如果在一个跟踪分支上输入 <code>git pull</code>，Git 能自动地识别去哪个服务器上抓取、合并到哪个分支。</p>
<p>git checkout -b <branch> <remote>/<branch> 的简化操作：</p>
<p>git checkout –track <remote>/<branch></p>
<p>git checkout <remote>/<branch></p>
<h5 id="设置上游分支"><a href="#设置上游分支" class="headerlink" title="设置上游分支"></a>设置上游分支</h5><p>git branch -u <remote>/<branch></p>
<p>如果想要查看设置的所有跟踪分支，可以使用 <code>git branch</code> 的 <code>-vv</code> 选项</p>
<p>git fetch –all; git branch -vv</p>
<ol>
<li>每次 git add 操作，暂存区 .git/index 文件 都会修改</li>
<li>每次 git commit 操作<ol>
<li>.git\refs\heads${分支名} 记录的 commitId会修改</li>
<li>./git/COMMIT_EDITMSG 保存提交信息；logs 保存分支详细的提交信息</li>
<li>对象区 .git/objects  都会增加对应的 对象二进制文件 （名称等于当前commitId的二进制文件 + 其他文件对象的二进制文件）<ol>
<li>数量跟文件数量 + 1 不一致</li>
</ol>
</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/09/14/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200914-Excel%E6%93%8D%E4%BD%9C_TODO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/14/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200914-Excel%E6%93%8D%E4%BD%9C_TODO/" class="post-title-link" itemprop="url">Excel操作_TODO</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-14 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-14T00:00:00+00:00">2020-09-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">软件开发流程</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/09/14/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200914-Excel%E6%93%8D%E4%BD%9C_TODO/" class="post-meta-item leancloud_visitors" data-flag-title="Excel操作_TODO" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/14/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200914-Excel%E6%93%8D%E4%BD%9C_TODO/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/14/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200914-Excel%E6%93%8D%E4%BD%9C_TODO/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>611</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ol>
<li>HSSF (Horrible SpreadSheet Format（电子表格格式）的缩写)<ol>
<li>对应.xls 文件，兼容 Office97-2003 版本 ）（一个sheet最大行数65536，最大列数256）</li>
</ol>
</li>
<li>XSSF<ol>
<li>容 Office2007及以后版本 （一个sheet最大行数1048576，最大列数16384）</li>
</ol>
</li>
<li><strong>SXSSF</strong> （低内存占用的操作方式）<ol>
<li>SXSSFWorkbook w3= new SXSSFWorkbook(100);//内存中保留100条数据，其余写入硬盘临时文件</li>
</ol>
</li>
</ol>
<h2 id="文档结构类"><a href="#文档结构类" class="headerlink" title="文档结构类"></a>文档结构类</h2><p>HSSFWorkbook excel文档对象<br>HSSFSheet excel的sheet<br>HSSFRow excel的行<br>HSSFCell excel的单元格<br>HSSFFont excel字体<br>HSSFName 名称<br>HSSFDataFormat 日期格式<br>HSSFHeader sheet头<br>HSSFFooter sheet尾<br>HSSFCellStyle cell样式<br>HSSFDateUtil 日期<br>HSSFPrintSetup 打印<br>HSSFErrorConstants 错误信息表</p>
<h3 id="POI"><a href="#POI" class="headerlink" title="POI"></a>POI</h3><h3 id="easyExcel"><a href="#easyExcel" class="headerlink" title="easyExcel"></a>easyExcel</h3><p><a target="_blank" rel="noopener" href="https://github.com/alibaba/easyexcel/blob/master/src/test/java/com/alibaba/easyexcel/test/demo/web/WebTest.java">https://github.com/alibaba/easyexcel/blob/master/src/test/java/com/alibaba/easyexcel/test/demo/web/WebTest.java</a></p>
<h3 id="easyPoi"><a href="#easyPoi" class="headerlink" title="easyPoi"></a>easyPoi</h3><p><a target="_blank" rel="noopener" href="https://gitee.com/lemur/easypoi">https://gitee.com/lemur/easypoi</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://huangyuye.github.io/2020/09/09/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200909-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="yy.huang">
      <meta itemprop="description" content="想要成为酷酷的软件开发者">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪歪的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/09/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200909-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">单元测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-09 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-09T00:00:00+00:00">2020-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-25 07:35:16" itemprop="dateModified" datetime="2021-05-25T07:35:16+00:00">2021-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">知识库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">软件开发流程</span></a>
                </span>
            </span>

          <br>

          
            <span id="/2020/09/09/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200909-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="post-meta-item leancloud_visitors" data-flag-title="单元测试" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/09/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200909-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/09/Java/%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/20200909-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>6.9k</span> <!-- TODO func undefined -->
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="如何进行单元测试"><a href="#如何进行单元测试" class="headerlink" title="如何进行单元测试"></a>如何进行单元测试</h2><p><strong>单元测试”称为“开发阶段的自动化测试“。</strong></p>
<ol>
<li> 由开发同学完成</li>
<li>测试是自动化的</li>
<li>不一定是只验证一个“单元”的正确性</li>
</ol>
<p><strong>单元测试在市面上的介绍存在的问题</strong></p>
<ol>
<li>仅集中在介绍某个工具或者框架怎么用（比如JUnit，mockito，jest等）</li>
<li>一些理论上的对这种测试好处的介绍，通篇是“应该做测试”，“这么做了就容易得到高内聚的代码“</li>
<li>只拿“纯函数”的测试举例子，几乎没有复杂的依赖（无法贴合实际项目：业务逻辑、数据分析的job代码）<ol>
<li>函数的输入就是其所有可见的上下文了。对于一个纯函数，开发者者很容易构造其<strong>上下文</strong>。</li>
</ol>
</li>
<li><strong>很少有关于真正为什么这个事情难以落地的讨论</strong></li>
</ol>
<p><strong>实践起来常见问题</strong></p>
<ol>
<li>没想明白要验证什么</li>
<li>对依赖的处理方式的拿捏是测试里最难的地方。（对不纯的依赖都要尽量mock）<ol>
<li>比如：验证一个下单打折的函数是否能计算出正确的折扣，往往先要从DB获取折扣数据(依赖)，才能做计算。</li>
<li>如果mock掉这个DB查询的依赖，那这个单元测试的假设是：<strong>“读取折扣的SQL本身是肯定没错的，因此不验证它，只验证读到折扣数据后，根据输入金额得到折扣金额的逻辑是正确的“</strong></li>
<li>如果不mock掉DB查询的依赖，即使用真的生产DB做验证，这里测试的目标就从“<strong>验证计算折扣的逻辑</strong>”变成“<strong>验证计算折扣这个功能是否正确</strong>“。<ol>
<li>這裏已经不是“单元”了，而是一个函数 + 一句SQL执行 + DB功能正确的（局部）“集成”测试，是几个组件一起测试才能实现这个验证。这样的测试代价是必须部署一个真的数据库，还要准备数据和<strong>后门</strong>。</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>到底要不要做”局部集成测试“而非实际的单元测试？</strong></p>
<ul>
<li>你的目标就是要测“一小段代码是不是正确”。你可以很有信心的保证其他依赖的正确性都能保证。那明显，这时就不用花精力做集成了。怎么简单怎么来。这样的测试甚至都不需要启动Spring这类框架，运行速度会很快。</li>
<li>你在开发一个小的lib。这个lib就很纯，没有任何复杂的依赖，那么单元测试就足够了。</li>
<li>如果团队已经安排了专人做这块的集成测试，开发人员就没必要做重复劳动了。如果这块测试的不好，应该优先去和那个测试同学沟通，看看怎么改善。沟通无效，在manager知情和同意下，再自己补。</li>
<li>如果开发自己做集成可以更容易构造全集成，而测试不太容易构造的例子，那么还是自己集成测试一下比较好。性价比高。</li>
<li>如果是要测试一个端到端的接口返回正确，那么唯一的办法就是集成测试——真的启动server，使用真的数据库、Redis、队列……，做端到端的测试。这时也许docker可以帮助你一键启动全套环境。</li>
<li>如果一个测试涉及到依赖的核心功能，也必须得做集成测试。比如要测试一个Exception是不是会让当前事务真的回滚，同时发生的其他事务因为隔离级别不会受到影响，那么你必须引入真的，和生产一模一样的支持事务的数据库才行。</li>
<li>如果是前端测试，基本上也必须得做集成测试。就算可以mock掉所有的后端接口，也得引入浏览器或者App框架才能测试。</li>
</ul>
<p><strong>单元测试目的</strong></p>
<p>验证“自己写的一小段代码是不是符合设计逻辑的“。</p>
<p><strong>单元测试的出发点</strong></p>
<p>开发人员为了保证代码质量应该怎样做</p>
<p><strong>单元测试怎么做？</strong></p>
<ul>
<li>确定测试的目标，到底想验证什么</li>
<li>基于这个目标，找到和维护需要的工具，比如Runner，Mock，覆盖率统计工具等，Embedded数据库等</li>
<li>留足给测试的时间，并通过code review的手段来保证写有效的测试</li>
<li>给一些典型的场景如何做测试写一写文档，积累经验（比如如何测试要模拟时间的案例？）</li>
<li>统计测试同学给开发同学报bug的数据，盯紧代码质量不高的同学，多做沟通</li>
<li>根据出现bug的数量和scope来推动部分关键代码的测试质量的改善</li>
<li>在能达成测试目标的前提下，看看能够整合一些工具，降低维护测试依赖的成本</li>
</ul>
<p><strong>单元测试的好处</strong></p>
<ol>
<li>让你写出更好的代码：只有高内聚、低耦合而且接口设计合理的代码才易于测试；</li>
<li>让你在修改代码时更有信心。</li>
</ol>
<h2 id="单元测试概念"><a href="#单元测试概念" class="headerlink" title="单元测试概念"></a>单元测试概念</h2><h3 id="单元测试框架"><a href="#单元测试框架" class="headerlink" title="单元测试框架"></a>单元测试框架</h3><h4 id="junit"><a href="#junit" class="headerlink" title="junit"></a>junit</h4><p>基本框架</p>
<h4 id="testNG"><a href="#testNG" class="headerlink" title="testNG"></a>testNG</h4><p>可以很容易地编写自定义测试。</p>
<p>如果您拥有执行测试所需的测试数据，TestNG可以轻松获取要编写单元测试的测试数据。</p>
<h3 id="模拟框架"><a href="#模拟框架" class="headerlink" title="模拟框架"></a>模拟框架</h3><h4 id="EasyMock"><a href="#EasyMock" class="headerlink" title="EasyMock"></a>EasyMock</h4><p>Mockito的替代品</p>
<ol>
<li>录制：EasyMock.expect(mock.someMethod())</li>
<li>执行：EasyMock.replay(mock)</li>
<li>验证期望：EasyMock.verify(mock)</li>
</ol>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
<h4 id="Mockito-amp-JMockit"><a href="#Mockito-amp-JMockit" class="headerlink" title="Mockito &amp; JMockit"></a>Mockito &amp; JMockit</h4><ol>
<li><h1 id="先进行Stub：when-mock-someMethod-then"><a href="#先进行Stub：when-mock-someMethod-then" class="headerlink" title="先进行Stub：when(mock.someMethod()).then()"></a>先进行Stub：when(mock.someMethod()).then()</h1><h4 id="Mockito-Vs-JMockit"><a href="#Mockito-Vs-JMockit" class="headerlink" title="Mockito Vs JMockit"></a>Mockito Vs JMockit</h4></li>
</ol>
<ol>
<li><p>Stub：when(mock.someMethod()).then()</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1bd18958d9aa8a5bf6a3acce872ed9d752807f29</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</li>
<li><p>验证行为：verify(mock).someMethod()</p>
</li>
</ol>
<h4 id="PowerMock"><a href="#PowerMock" class="headerlink" title="PowerMock"></a>PowerMock</h4><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>用于模拟复杂场景<br>=======<br>模拟复杂场景</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1bd18958d9aa8a5bf6a3acce872ed9d752807f29</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>想要模拟静态方法、构造函数和私有方法时，Powermock非常有用。</p>
<h3 id="结合项目框架使用的mock框架"><a href="#结合项目框架使用的mock框架" class="headerlink" title="结合项目框架使用的mock框架"></a>结合项目框架使用的mock框架</h3><p>Spring 有 Spring Test、Spring MVC Test</p>
<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><h4 id="AssertJ-Hamcrest"><a href="#AssertJ-Hamcrest" class="headerlink" title="AssertJ / Hamcrest"></a>AssertJ / Hamcrest</h4><p>Hamcrest提供了AssertJ的替代方案来编写断言。</p>
<h3 id="Spring-Unit"><a href="#Spring-Unit" class="headerlink" title="Spring Unit"></a>Spring Unit</h3><p>Web层- Spring MockMVC</p>
<p>数据层- DataJpaTest</p>
<p>业务层-基于Mockito的测试，最好不要启动Spring Context</p>
<h3 id="断言JSON响应"><a href="#断言JSON响应" class="headerlink" title="断言JSON响应"></a>断言JSON响应</h3><h4 id="JSONAssert-JSONPath"><a href="#JSONAssert-JSONPath" class="headerlink" title="JSONAssert / JSONPath"></a>JSONAssert / JSONPath</h4><h3 id="测试覆盖率"><a href="#测试覆盖率" class="headerlink" title="测试覆盖率"></a>测试覆盖率</h3><p>Cobertura</p>
<h3 id="jenkins"><a href="#jenkins" class="headerlink" title="jenkins"></a>jenkins</h3><p>利用 jenkins 等持续集成工具定时/有代码变更时运行单元测试，保证修改不会破坏已有的代码功能。</p>
<h3 id="Test-Doubles：Fakes、Mocks-以及-Stubs"><a href="#Test-Doubles：Fakes、Mocks-以及-Stubs" class="headerlink" title="Test Doubles：Fakes、Mocks 以及 Stubs"></a>Test Doubles：Fakes、Mocks 以及 Stubs</h3><p><strong>double：</strong>极相似的对应物</p>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>double存在的意义：用来对系统(或者将粒度放小为模块，单元)进行隔离<br>=======<br>用来对系统(或者将粒度放小为模块，单元)进行隔离</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1bd18958d9aa8a5bf6a3acce872ed9d752807f29</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><strong>Dummy</strong></p>
<p>对象被四处传递，但是从不被真正使用。通常他们只是用来填充参数列表。</p>
<p><strong>Fake</strong><br>Fakes are objects that have working implementations, but not same as production one. Usually they take some shortcut and have simplified version of production code.Fake 是那些包含了生产环境下具体实现的简化版本的对象。（用于Test的测试实现类）</p>
<p><strong>Stub</strong></p>
<p>Stub is an object that holds predefined data and uses it to answer calls during tests. It is used when we cannot or don’t want to involve objects that would answer with real data or have undesirable side effects.Stub 代指那些包含了预定义好的数据并且在测试时返回给调用者的对象。Stub 常被用于我们不希望返回真实数据或者造成其他副作用的场景。（提供Query数据的对象）</p>
<p>stub是state-based，关注的是输入和输出。</p>
<p>stub意为踩熄</p>
<p><strong>Mock</strong></p>
<p>Mocks are objects that register calls they receive. In test assertion we can verify on Mocks that all expected actions were performed.Mocks 代指那些仅记录它们的调用信息的对象，在测试断言中我们需要验证 Mocks 被进行了符合期望的调用。(模拟行为的对象)</p>
<p>mock是interaction-based，关注的是交互过程。</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26942686">https://zhuanlan.zhihu.com/p/26942686</a></p>
<h3 id="Classical-和-Mockist-TDD-测试风格"><a href="#Classical-和-Mockist-TDD-测试风格" class="headerlink" title="Classical 和 Mockist  TDD 测试风格"></a>Classical 和 Mockist  TDD 测试风格</h3><p>验证状态 vs 验证行为</p>
<h3 id="SUT-amp-UUT-amp-AUT"><a href="#SUT-amp-UUT-amp-AUT" class="headerlink" title="SUT &amp; UUT &amp; AUT"></a>SUT &amp; UUT &amp; AUT</h3><p>SUT（system under test，被测试系统）</p>
<p>UUT（unit under test，被测试单元）</p>
<p>AUT（application under test，被测试应用软件）</p>
<h3 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h3><ol>
<li><p>《单元测试之道》</p>
</li>
<li><p>《修改代码的艺术》</p>
</li>
<li><p>Mocks Aren’t Stubs</p>
</li>
</ol>
<h2 id="项目实践"><a href="#项目实践" class="headerlink" title="项目实践"></a>项目实践</h2><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/67801427">https://zhuanlan.zhihu.com/p/67801427</a></p>
<p><a target="_blank" rel="noopener" href="http://tengj.top/2017/12/28/springboot12/">http://tengj.top/2017/12/28/springboot12/</a></p>
<h3 id="场景一、测试控制层"><a href="#场景一、测试控制层" class="headerlink" title="场景一、测试控制层"></a>场景一、测试控制层</h3><h5 id="前置步骤"><a href="#前置步骤" class="headerlink" title="前置步骤"></a>前置步骤</h5><ol>
<li>生成<code>TargetController</code>的单元测试类<code>TargetControllerTest</code>（一般包括整个controller的所有方法的testCase）</li>
</ol>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>2. 生成目标方法<code>targetMethod</code>的单元测试方法<code>testTargetMethod</code><br>=======<br>2. 生成<code>targetMethod</code>的单元测试方法<code>testTargetMethod</code></p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1bd18958d9aa8a5bf6a3acce872ed9d752807f29</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<ol start="3">
<li><p>注解声明单元测试类</p>
<ol>
<li>方式一</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明测试是在spring环境下运行的，这样就可以启用Spring的相关支持。</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="comment">// 注解负责扫描配置来构建测试用的Spring上下文环境。它默认搜索@SpringBootConfiguration类，除非我们通过classes属性指定配置类，或者通过自定义内嵌的@Configuration类来指定配置。</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>方式二</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="comment">// 实例化一个MockMvc的bean + 可指定只实例化某一到多个Controller（但是同样也会遵从配置类的注解去做更多的工作）</span></span><br><span class="line"><span class="meta">@WebMvcTest(AppCustomerController.class)</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>准备MockMvc对象</p>
<ol>
<li><p>方式一</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> WebApplicationContext wac;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> MockMvc mvc;</span><br><span class="line"><span class="meta">@BeforeEach</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mvc = MockMvcBuilders.webAppContextSetup(wac).build(); <span class="comment">//初始化MockMvc对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>方式二</p>
<ol>
<li>可直接使用@WebMvcTest实例化的mockMvcBean</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> MockMvc mvc;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>只实例化目标类，避免其他无关类的实例化开销（自定义内嵌的@Configuration类来指定配置）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;xxx&quot;,</span></span><br><span class="line"><span class="meta">        useDefaultFilters = false,</span></span><br><span class="line"><span class="meta">        includeFilters = @ComponentScan.Filter(</span></span><br><span class="line"><span class="meta">                type = FilterType.REGEX,</span></span><br><span class="line"><span class="meta">                pattern = &#123;&quot;xxx.TargetController&quot;&#125;)</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerConfig</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>解决TargetController被测对象的其他依赖问题</p>
</li>
<li><p>将测试目标的所有依赖bean声明为<strong>模拟的bean</strong>，这些模拟的bean将<strong>被注入测试目标bean</strong>。</p>
</li>
<li><p>构建MockHttpSession，解决请求过程中的用户验证问题</p>
</li>
<li><p>绝大部分的方法受限于公司封装的底层框架，必须实例化对应的bean，且为带参构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 内部嵌套javaConfig类</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> SpringContext <span class="title">springContext</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SpringContext(beanFactory); <span class="comment">// 由SqlContext实例化</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@MockBean</span></span><br><span class="line">BaseService baseService;</span><br><span class="line"><span class="meta">@MockBean</span></span><br><span class="line">CustomerSessionService customerSessionService;</span><br></pre></td></tr></table></figure></li>
<li><p>Mockito.spy()方法模拟出来的对象，调用该模拟对象的方法时，若该方法没有被”打桩“（预设），则会实际调用该方法真实逻辑。相比Mockito.mock()出来的模拟对象，若调用mock对象的方法没有被打桩，则返回默认值。</p>
</li>
<li><p>doReturn().when()与when().thenReturn()</p>
<ol>
<li>spy模拟对象<ol>
<li>when(…) thenReturn(…)会调用真实的方法</li>
<li> doReturn(…) when(…) 不会调用真实方法</li>
</ol>
</li>
</ol>
</li>
<li><p>2.1.0版本以前的<strong>Mockito</strong>是<strong>不能mock final类和final方法的</strong>，之后的也要通过配置一些相关文件才行(<a target="_blank" rel="noopener" href="https://github.com/mockito/mockito/wiki/What's-new-in-Mockito-2#mock-the-unmockable-opt-in-mocking-of-final-classesmethods">Mock the unmockable: opt-in mocking of final classes/methods</a>)。因此，它的补充框架PowerMock也应运而生。</p>
<ol>
<li>创建配置文件 src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker</li>
<li>文件内容：mock-maker-inline</li>
</ol>
</li>
</ol>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>12. powerMock（未实践）<br>=======<br>12. powerMock</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1bd18958d9aa8a5bf6a3acce872ed9d752807f29</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(PowerMockRunner.class)</span> <span class="comment">// 替代SpringRunner.class</span></span><br><span class="line"><span class="comment">// // powermock使用了自定义的PowerMockRunner，与spring集成时，可以代理至SpringJUnit4ClassRunner。</span></span><br><span class="line"><span class="meta">@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">// @PowerMockRunnerDelegate(Parameterized.class)</span></span><br><span class="line"><span class="meta">@PrepareForTest(&#123;StaticService.class&#125;)</span> <span class="comment">// 包含静态类的方法</span></span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="13">
<li>powerMock + org.mockito.plugins.MockMaker 冲突问题<ol>
<li>org.mockito.internal.configuration.plugins.PluginLoader：java.lang.ClassNotFoundException: mock-maker-inline</li>
<li>删掉扩展文件后：java.lang.NoSuchMethodError: org.mockito.MockingDetails.getMockCreationSettings()</li>
</ol>
</li>
<li>@Mock 和 @InjectMocks 搭配使用（而非@MockBean）</li>
</ol>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>    1. 而 @MockBean是 springBootTest提供的注解，用于将响应的bean注册到spring容器（且可指定beanName）<br>=======<br>    1. @MockBean是 springBootTest提供的注解，用于将响应的bean注册到spring容器（且可指定beanName）</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1bd18958d9aa8a5bf6a3acce872ed9d752807f29</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MockBean(name = &quot;guide.SgGuide&quot;)</span></span><br><span class="line">SgGuide sgGuide;</span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="16">
<li><p>ArgumentMatchers.any() vs Mockito.any() 是同一个东西，<strong>Mockito 继承了 ArgumentMatchers</strong></p>
</li>
<li><p>doxxx().when() 不能用于 @MockBean 场景下??? （given().willReturn()）</p>
</li>
<li><p><strong>mockMvc添加过滤器</strong></p>
<ol>
<li>mMockMvc = MockMvcBuilders.webAppContextSetup(context).addFilter(new UserFilter()).build();</li>
</ol>
</li>
</ol>
<p><strong>参考链接：</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/27313846/answer/853193909?utm_source=wechat_session&amp;utm_medium=social&amp;utm_oi=983101242913976320&amp;utm_content=group2_Answer&amp;utm_campaign=shareopn">https://www.zhihu.com/question/27313846/answer/853193909?utm_source=wechat_session&amp;utm_medium=social&amp;utm_oi=983101242913976320&amp;utm_content=group2_Answer&amp;utm_campaign=shareopn</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <!-- 添加点击头像-主页跳转 --> 
  <a href="/">
    <img class="site-author-image" itemprop="image" alt="yy.huang"
      src="/images/avatar.jpg">
  </a>
  <p class="site-author-name" itemprop="name">yy.huang</p>
  <div class="site-description" itemprop="description">想要成为酷酷的软件开发者</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/huangyuye" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;huangyuye" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:747776824@qq.com" title="E-Mail → mailto:747776824@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fas fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.yuque.com/huangyuye/qzf3af" title="https:&#x2F;&#x2F;www.yuque.com&#x2F;huangyuye&#x2F;qzf3af" rel="noopener" target="_blank">语雀</a>
        </li>
    </ul>
  </div>

<!-- 每日一言 start -->
<!-- none-select-br -->

<p></p>

<!-- hitokoto -->

<div class="hitokoto-title">
	<i class="fa fa-paragraph"></i>
	<b>一言</b>
</div>

<div id="hitokoto">:D 获取中...</div>
<i id="hitofrom">:D 获取中...</i>

<script src="https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"></script>
<script>
  fetch('https://v1.hitokoto.cn')
    .then(function (res){
      return res.json();
    })
    .then(function (data) {
      var hitokoto = document.getElementById('hitokoto');
      hitokoto.innerText = '\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + data.hitokoto;
      var hitofrom = document.getElementById('hitofrom');
      hitofrom.innerText = "——" + data.from + '\xa0'; 
    })
    .catch(function (err) {
      console.error(err);
    })
</script>
<!-- 每日一言 end -->

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">

  <!--
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">true</span>
  -->
    <!-- <span class="post-meta-divider">|</span> -->
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">150k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">2:16</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"UUUWSLrMNACz8vh8qf2aAksw-gzGzoHsz","app_key":"Jm3XS0ISb48hvvgbTu0qy3G9","server_url":null,"security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  

   
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20210520,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒");
    ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
    div.innerHTML = `我已在此等候你 ${ages}`;
  } 
  var div = document.createElement("div");
  //插入到copyright之后
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>


 
<script>
  var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(つェ⊂)我藏好了哦~" + OriginTitile;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~" + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 2000);
    }
  });
</script>


 

<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'UUUWSLrMNACz8vh8qf2aAksw-gzGzoHsz',
      appKey     : 'Jm3XS0ISb48hvvgbTu0qy3G9',
      placeholder: "建议在上方留下昵称和邮箱信息，以便收到回复通知~",
      avatar     : '/images/avatar.jpg',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>




<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
